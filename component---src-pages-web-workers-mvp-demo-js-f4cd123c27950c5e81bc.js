(self.webpackChunkgatsby_test=self.webpackChunkgatsby_test||[]).push([[921],{9789:function(e,t,n){"use strict";var r;n.d(t,{Z:function(){return g}});var a=new Uint8Array(16);function i(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(a)}var o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var l=function(e){return"string"==typeof e&&o.test(e)},s=[],c=0;c<256;++c)s.push((c+256).toString(16).substr(1));var u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]).toLowerCase();if(!l(n))throw TypeError("Stringified UUID is invalid");return n};var g=function(e,t,n){var r=(e=e||{}).random||(e.rng||i)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var a=0;a<16;++a)t[n+a]=r[a];return t}return u(r)}},78531:function(e,t,n){"use strict";n.r(t);var r=n(85061),a=n(92137),i=n(87757),o=n.n(i),l=n(67294),s=n(96667),c=n(47798),u=n(80838),g=n(83332),m=n(44005),d=n(90058),f=n(43638),p=n(80633),v=n(79312),h=n(85505),b=n(10920),E=n(27136),y=n(51474),w=n(49995),Z=n(13508),k=n(54657),C=(n(98910),n(22019),n(49224),n(39331),n(4513)),P=n(89952),T=n(65733),S=n(32253),x=n(9901),N=n(31690),A=n(11592),R=n(76047),W=n(77447),j=n(88816),L=n(59477),U=n(9789),F=n(17710),H=n(59274),I=n(31261),D=n(8441),M=n(96531),B=n(48498),O=n(67253),V=(n(74298),(0,b.Z)((function(e){return{root:{display:"flex",alignItems:"center"},wrapper:{margin:e.spacing(1),position:"relative"},buttonSuccess:{backgroundColor:y.Z[500],"&:hover":{backgroundColor:y.Z[700]}},fabProgress:{color:y.Z[500],position:"absolute",top:-6,left:-6,zIndex:1},buttonProgress:{color:y.Z[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}})));t.default=function(){var e,t=l.useState(null),n=t[0],i=t[1],b=l.useState(null),y=(b[0],b[1],l.useState(null)),z=(y[0],y[1],l.useState(at([]))),$=z[0],_=z[1],X=l.useState(!1),q=X[0],G=X[1],J=l.useState(!1),K=J[0],Q=J[1],Y=l.useState(!1),ee=Y[0],te=Y[1],ne=l.useState(!1),re=ne[0],ae=ne[1],ie=l.useState(!0),oe=ie[0],le=ie[1],se=l.useState(!1),ce=(se[0],se[1],l.useState(!1)),ue=ce[0],ge=ce[1],me=l.useState(!1),de=me[0],fe=me[1],pe=l.useState(!1),ve=pe[0],he=(pe[1],l.useState(!1)),be=he[0],Ee=he[1],ye=l.useState(!1),we=ye[0],Ze=ye[1],ke=l.useState(null),Ce=ke[0],Pe=ke[1],Te=l.useState(null),Se=Te[0],xe=Te[1],Ne=l.useState(null),Ae=Ne[0],Re=Ne[1],We=l.useState([[0,0],[0,0]]),je=We[0],Le=We[1],Ue=l.useState(null),Fe=Ue[0],He=Ue[1],Ie=l.useState([]),De=Ie[0],Me=Ie[1],Be=l.useState([]),Oe=(Be[0],Be[1],l.useState(!1)),Ve=Oe[0],ze=Oe[1],$e=l.useState(null),_e=($e[0],$e[1]);l.useEffect((function(){var e=new MessageChannel,t=new MessageChannel,n=Xe("../dataWorker.js","dataWebWorker");n.postMessage({action:"connectToCanvasWorker"},[e.port1]),n.postMessage({action:"connectToClassifierWorker"},[t.port1]),xe(n);var r=Xe("../canvasWorker.js","CanvasWebWorker");r.postMessage({action:"connectToDataWorker"},[e.port2]),Pe(r);var a=Xe("../classifierWorker.js","classifierWebWorker");a.postMessage({action:"connectToDataWorker"},[t.port2]),Re(a)}),[]);var Xe=function(e,t){var n=new Worker(e);return n.addEventListener("error",(function(e){console.log("["+t+"] Error",e.message,e)})),n},qe=V(),Ge=(0,h.Z)(((e={})[qe.buttonSuccess]=de,e)),Je=function(e){i(null),void 0!==e&&Ke(e)},Ke=function(){var e=(0,a.Z)(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Fetch!"),_({unclassified:[],positive:[],negative:[]}),e.t0=t,e.next="Random"===e.t0?6:"Positive"===e.t0||"Negative"===e.t0?8:"Confusing"===e.t0?10:"TrainingPositive"===e.t0?12:"TrainingNegative"===e.t0?16:19;break;case 6:return et(Se,"get",{getType:"cellPairs",getArgs:{amount:16}}).then((function(e){var t=e.data.getResult;return Me(t),et(Ce,"get",{getType:"blobUrlsFromCellPairs",getArgs:{cellPairs:t}})})).then((function(e){var t=at(e.data.blobUrls);console.log(t),_(t)})),e.abrupt("break",19);case 8:return et(Se,"get",{getType:"cellPairs",getArgs:{amount:100}}).then((function(e){var n=e.data.getResult;return et(Ae,"predictFilterCellPairs",{cellPairs:n,classType:t})})).then((function(e){var t=e.data.filteredCellPairs,n=t.slice(0,16);return console.log(e),Me(t),et(Ce,"get",{getType:"blobUrlsFromCellPairs",getArgs:{cellPairs:n}})})).then((function(e){var t=at(e.data.blobUrls);console.log(t),_(t)})),e.abrupt("break",19);case 10:return et(Se,"get",{getType:"cellPairs",getArgs:{amount:100}}).then((function(e){var t=e.data.getResult;return et(Ae,"confusingFilterCellPairs",{cellPairs:t})})).then((function(e){var t=e.data.sortedCellPairs;console.log(e);var n=t.slice(0,16);return Me(n),et(Ce,"get",{getType:"blobUrlsFromCellPairs",getArgs:{cellPairs:n}})})).then((function(e){var t=at(e.data.blobUrls);console.log(t),_(t)})),e.abrupt("break",19);case 12:return n=Fe.trainingData.map((function(e){return{ImageNumber:e[0],ObjectNumber:e[1]}})),console.log(n,Fe.trainingLabels,Fe.trainingData),et(Ae,"predictFilterCellPairs",{cellPairs:n,classType:"Positive"}).then((function(e){var t=e.data.filteredCellPairs;return console.log(e),Me(t),et(Ce,"get",{getType:"blobUrlsFromCellPairs",getArgs:{cellPairs:t}})})).then((function(e){var t=at(e.data.blobUrls);console.log(t),_(t)})),e.abrupt("break",19);case 16:return r=Fe.trainingData.map((function(e){return{ImageNumber:e[0],ObjectNumber:e[1]}})),et(Ae,"predictFilterCellPairs",{cellPairs:r,classType:"Negative"}).then((function(e){var t=e.data.filteredCellPairs;return console.log(e),Me(t),et(Ce,"get",{getType:"blobUrlsFromCellPairs",getArgs:{cellPairs:t}})})).then((function(e){var t=at(e.data.blobUrls);console.log(t),_(t)})),e.abrupt("break",19);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Qe=function(){var e=(0,a.Z)(o().mark((function e(){var t,n,a,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Train!"),t=$.positive.map((function(e){return De[e.id]})),n=$.negative.map((function(e){return De[e.id]})),a=t.concat(n),i=new Array(t.length).fill(1).concat(new Array(n.length).fill(0)),console.log(a,i),ze(!1),_(at([])),Me([]),et(Se,"get",{getType:"objectRowsFromCellpairs",getArgs:{cellPairs:a}}).then((function(e){var t=e.data.getResult,n={classifierType:"LogisticRegression",trainingData:[].concat((0,r.Z)(Fe.trainingData),(0,r.Z)(t)),trainingLabels:[].concat((0,r.Z)(Fe.trainingLabels),(0,r.Z)(i)),featureIndicesToUse:Fe.featureIndicesToUse};return Ye(n)}));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ye=function(e){return Ze(!0),et(Ae,"train",{trainingObject:e}).then((function(){return et(Ae,"confusionMatrix")})).then((function(e){var t=e.data.confusionMatrix;console.log(t),Le(t)})).then((function(){He(e),Ze(!1)}))},et=function(e,t,n){console.log(e,t,n);var r=(0,U.Z)();return new Promise((function(a){e.addEventListener("message",(function t(n){n.data.uuid===r&&(e.removeEventListener("message",t),a(n))})),e.postMessage(Object.assign({action:t},n,{uuid:r}))}))},tt=function(){var e=(0,a.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Upload!"),ge(!0),et(Se,"init",{fileListObject:t.target.files}).then((function(){return et(Se,"get",{getType:"trainingObject"})})).then((function(e){console.log(e);var t=e.data.getResult;return Ye(t)})).then((function(){ge(!1),fe(!0),G(!0),Q(!0),ae(!0),te(!0),le(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nt=function(){var e=(0,a.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Score All!"),Ve){e.next=4;break}return console.log("Score All!"),e.abrupt("return",et(Ae,"scoreObjectData").then((function(e){var t=e.data.scoreTableObject;console.log(t),_e(t),ze(!0)})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),rt=function(){var e=(0,a.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Download!"),e.abrupt("return",et(Ae,"getClassifier").then((function(e){console.log(e),O.FBF("indexeddb://"+Fe.classifierType).then((function(e){e.save("downloads://"+Fe.classifierType)}))})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function at(e){return{unclassified:e.map((function(e,t,n){return{id:t,address:e,info:"cell info, biology stuff"}})),positive:[],negative:[]}}var it=function(){Ee(!1)};return l.createElement(D.d,{onChange:function(e,t,n,r){var a;if(r){var i,o=(0,H.p)($[e],$[r],t,n);return _(Object.assign({},$,((i={})[e]=o[0],i[r]=o[1],i)))}var l=(0,I.L)($[e],t,n);return _(Object.assign({},$,((a={})[e]=l,a)))}},l.createElement("div",{style:{overflowX:"hidden",hieght:"100%",width:"100%"}},l.createElement(s.Z,null,l.createElement(p.Z,{src:f.Z,style:{marginLeft:"10%",height:"30%",width:"25%",position:"relative",maxHeight:"125px",marginBottom:"1%"}}),l.createElement(c.Z,{style:{left:"40%"}},l.createElement("div",{className:qe.root},l.createElement("div",{className:qe.wrapper},l.createElement(W.ZP,{title:"Load Data","aria-label":"load data"},l.createElement(w.Z,{"aria-label":"save",color:"primary",component:"label",className:Ge,style:{height:"5vw",width:"5vw"}},de?l.createElement(Z.Z,{style:{hieght:"50%",width:"50%"}}):l.createElement(k.Z,{style:{hieght:"50%",width:"50%"}}),l.createElement("input",{type:"file",hidden:!0,webkitdirectory:"true",mozdirectory:"true",msdirectory:"true",odirectory:"true",directory:"true",multiple:!0,onChange:function(e){tt(e)},disabled:!oe}))),ue&&l.createElement(E.Z,{className:qe.fabProgress,style:{height:"6vw",width:"6vw",marginTop:"4%",marginRight:"4%"}})))),l.createElement(c.Z,{style:{left:"15%",marginTop:".75%"}},l.createElement(W.ZP,{title:"Download","aria-label":"download"},l.createElement(w.Z,{"aria-label":"save",color:"primary",component:"label",disabled:!re,onClick:rt,style:{height:"5vw",width:"5vw"}}," ",l.createElement(v.Z,{style:{hieght:"50%",width:"50%"}}))))),l.createElement(s.Z,null,l.createElement(u.Z,{container:!0,justify:"center",spacing:2,style:{marginBottom:15}},l.createElement(u.Z,{key:0,item:!0},l.createElement(g.Z,{disabled:!q,variant:"contained","aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){i(e.currentTarget)}},"Fetch"),l.createElement(m.Z,{id:"simple-menu",anchorEl:n,keepMounted:!0,open:Boolean(n),onClose:Je},l.createElement(d.Z,{onClick:function(){return Je("Random")}},"Random"),l.createElement(d.Z,{onClick:function(){return Je("Positive")}},"Positive"),l.createElement(d.Z,{onClick:function(){return Je("Negative")}},"Negative"),l.createElement(d.Z,{onClick:function(){Ee(!0)}},"By Image"),l.createElement(d.Z,{onClick:function(){return Je("TrainingPositive")}},"Training Set Positive"),l.createElement(d.Z,{onClick:function(){return Je("TrainingNegative")}},"Training Set Negative"),l.createElement(d.Z,{onClick:function(){return Je("Confusing")}},"Confusing"),l.createElement(C.Z,{open:be,onClose:it},l.createElement(x.Z,null,"Fetch By Image"),l.createElement(T.Z,null,l.createElement(S.Z,null,"Select the image number you would like to fetch from."),l.createElement("form",{noValidate:!0},l.createElement(N.Z,null,l.createElement(A.Z,null,"Image"),l.createElement(R.Z,{autoFocus:!0},l.createElement(d.Z,{value:"1"},"1"),l.createElement(d.Z,{value:"2"},"2"),l.createElement(d.Z,{value:"3"},"3"),l.createElement(d.Z,{value:"4"},"4"),l.createElement(d.Z,{value:"5"},"5"))))),l.createElement(P.Z,null,l.createElement(g.Z,{onClick:it,color:"primary"},"Close"))))),l.createElement(u.Z,{key:1,item:!0},l.createElement(g.Z,{disabled:!K,variant:"contained",onClick:Qe},"Train"),l.createElement(C.Z,{open:we},l.createElement(x.Z,null,"Loss and Accuracy"),l.createElement(T.Z,null,l.createElement("img",{width:100,height:100,src:F.Z})))),l.createElement(u.Z,{key:2,item:!0},ee?l.createElement(j.default,{confusionMatrix:je}):l.createElement(g.Z,{disabled:!ee,variant:"contained",onClick:function(){}},"Evaluate")),l.createElement(u.Z,{key:3,item:!0},ee?l.createElement(L.default,{handleScoreAll:nt}):l.createElement(g.Z,{disabled:!ee,variant:"contained",onClick:nt},"Score All")))),l.createElement("div",null,l.createElement("label",{style:{textAlign:"left",backgroundColor:"white",paddingLeft:"10%",marginBottom:"0.5%",userSelect:"none"}},"Unclassified"," "),l.createElement("div",null,l.createElement(M.$,{className:"dropzone ",id:"unclassified",boxesPerRow:8,rowHeight:80,style:{height:"20vw",maxHeight:200,minHeight:150,marginBottom:10,marginLeft:"10%",width:"80%"}},ve?l.createElement(E.Z,{style:{hieght:"7%",width:"7%",marginTop:"8%",marginLeft:"45%"}}):$.unclassified.map((function(e){return l.createElement(B.P,{className:"hoverTest",style:{height:"10vw",width:"10vw",minHeight:80,minWidth:80,maxHeight:105,maxWidth:105,padding:10},key:e.id},l.createElement("div",{className:"grid-item"},l.createElement("div",{className:"grid-item-content",style:{backgroundImage:"url("+e.address+")"}},l.createElement("span",{className:"hoverText"},e.info))))})))),l.createElement(s.Z,null,l.createElement("label",{style:{textAlign:"left",backgroundColor:"white",paddingLeft:"11%",userSelect:"none",marginBottom:"0.5%",marginTop:0}},"Positive"),l.createElement("label",{style:{textAlign:"left",backgroundColor:"white",paddingRight:"8%",userSelect:"none",margin:"auto",marginBottom:"0.5%",marginTop:0}},"Negative")),l.createElement(s.Z,null,l.createElement(M.$,{className:"dropzone positive",id:"positive",boxesPerRow:4,rowHeight:80,style:{height:"20vw",maxHeight:200,minHeight:150}},$.positive.map((function(e){return l.createElement(B.P,{className:"hoverTest",style:{height:"10vw",width:"10vw",minHeight:80,minWidth:80,maxHeight:105,maxWidth:105,padding:10},key:e.id},l.createElement("div",{className:"grid-item"},l.createElement("div",{className:"grid-item-content",style:{backgroundImage:"url("+e.address+")"}},l.createElement("span",{className:"hoverText"},e.info))))}))),l.createElement(M.$,{className:"dropzone negative",id:"negative",boxesPerRow:4,rowHeight:80,style:{height:"20vw",maxHeight:200,minHeight:150}},$.negative.map((function(e){return l.createElement(B.P,{className:"hoverTest",style:{height:"10vw",width:"10vw",minHeight:80,minWidth:80,maxHeight:105,maxWidth:105,padding:10},key:e.address},l.createElement("div",{className:"grid-item"},l.createElement("div",{className:"grid-item-content",style:{backgroundImage:"url("+e.address+")"}},l.createElement("span",{className:"hoverText"},e.info))))})))))))}},17710:function(e,t,n){"use strict";t.Z=n.p+"static/jones-885674426137aa7117b916008a9d4f44.jpg"}}]);
//# sourceMappingURL=component---src-pages-web-workers-mvp-demo-js-f4cd123c27950c5e81bc.js.map