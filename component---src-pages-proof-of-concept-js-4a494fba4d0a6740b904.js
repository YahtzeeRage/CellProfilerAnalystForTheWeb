/*! For license information please see component---src-pages-proof-of-concept-js-4a494fba4d0a6740b904.js.LICENSE.txt */
(self.webpackChunkgatsby_test=self.webpackChunkgatsby_test||[]).push([[82],{80838:function(e,t,n){"use strict";var i=n(81253),a=n(22122),r=n(67294),o=n(85505),s=n(13522),c=[0,1,2,3,4,5,6,7,8,9,10],l=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12];function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=parseFloat(e);return"".concat(n/t).concat(String(e).replace(String(n),"")||"px")}var d=r.forwardRef((function(e,t){var n=e.alignContent,s=void 0===n?"stretch":n,c=e.alignItems,l=void 0===c?"stretch":c,u=e.classes,d=e.className,f=e.component,m=void 0===f?"div":f,p=e.container,g=void 0!==p&&p,h=e.direction,b=void 0===h?"row":h,x=e.item,v=void 0!==x&&x,_=e.justify,y=void 0===_?"flex-start":_,w=e.lg,k=void 0!==w&&w,E=e.md,Z=void 0!==E&&E,j=e.sm,C=void 0!==j&&j,S=e.spacing,W=void 0===S?0:S,P=e.wrap,L=void 0===P?"wrap":P,I=e.xl,F=void 0!==I&&I,R=e.xs,z=void 0!==R&&R,D=e.zeroMinWidth,M=void 0!==D&&D,N=(0,i.Z)(e,["alignContent","alignItems","classes","className","component","container","direction","item","justify","lg","md","sm","spacing","wrap","xl","xs","zeroMinWidth"]),T=(0,o.Z)(u.root,d,g&&[u.container,0!==W&&u["spacing-xs-".concat(String(W))]],v&&u.item,M&&u.zeroMinWidth,"row"!==b&&u["direction-xs-".concat(String(b))],"wrap"!==L&&u["wrap-xs-".concat(String(L))],"stretch"!==l&&u["align-items-xs-".concat(String(l))],"stretch"!==s&&u["align-content-xs-".concat(String(s))],"flex-start"!==y&&u["justify-xs-".concat(String(y))],!1!==z&&u["grid-xs-".concat(String(z))],!1!==C&&u["grid-sm-".concat(String(C))],!1!==Z&&u["grid-md-".concat(String(Z))],!1!==k&&u["grid-lg-".concat(String(k))],!1!==F&&u["grid-xl-".concat(String(F))]);return r.createElement(m,(0,a.Z)({className:T,ref:t},N))})),f=(0,s.Z)((function(e){return(0,a.Z)({root:{},container:{boxSizing:"border-box",display:"flex",flexWrap:"wrap",width:"100%"},item:{boxSizing:"border-box",margin:"0"},zeroMinWidth:{minWidth:0},"direction-xs-column":{flexDirection:"column"},"direction-xs-column-reverse":{flexDirection:"column-reverse"},"direction-xs-row-reverse":{flexDirection:"row-reverse"},"wrap-xs-nowrap":{flexWrap:"nowrap"},"wrap-xs-wrap-reverse":{flexWrap:"wrap-reverse"},"align-items-xs-center":{alignItems:"center"},"align-items-xs-flex-start":{alignItems:"flex-start"},"align-items-xs-flex-end":{alignItems:"flex-end"},"align-items-xs-baseline":{alignItems:"baseline"},"align-content-xs-center":{alignContent:"center"},"align-content-xs-flex-start":{alignContent:"flex-start"},"align-content-xs-flex-end":{alignContent:"flex-end"},"align-content-xs-space-between":{alignContent:"space-between"},"align-content-xs-space-around":{alignContent:"space-around"},"justify-xs-center":{justifyContent:"center"},"justify-xs-flex-end":{justifyContent:"flex-end"},"justify-xs-space-between":{justifyContent:"space-between"},"justify-xs-space-around":{justifyContent:"space-around"},"justify-xs-space-evenly":{justifyContent:"space-evenly"}},function(e,t){var n={};return c.forEach((function(i){var a=e.spacing(i);0!==a&&(n["spacing-".concat(t,"-").concat(i)]={margin:"-".concat(u(a,2)),width:"calc(100% + ".concat(u(a),")"),"& > $item":{padding:u(a,2)}})})),n}(e,"xs"),e.breakpoints.keys.reduce((function(t,n){return function(e,t,n){var i={};l.forEach((function(e){var t="grid-".concat(n,"-").concat(e);if(!0!==e)if("auto"!==e){var a="".concat(Math.round(e/12*1e8)/1e6,"%");i[t]={flexBasis:a,flexGrow:0,maxWidth:a}}else i[t]={flexBasis:"auto",flexGrow:0,maxWidth:"none"};else i[t]={flexBasis:0,flexGrow:1,maxWidth:"100%"}})),"xs"===n?(0,a.Z)(e,i):e[t.breakpoints.up(n)]=i}(t,e,n),t}),{}))}),{name:"MuiGrid"})(d);t.Z=f},91510:function(e,t,n){"use strict";function i(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function i(){for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];var o=this,s=function(){e.apply(o,a)};clearTimeout(t),t=setTimeout(s,n)}return i.clear=function(){clearTimeout(t)},i}n.d(t,{Z:function(){return i}})},61008:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var i=n(67294);function a(e,t){return i.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)}},21846:function(e,t){"use strict";var n=60103,i=60106,a=60107,r=60108,o=60114,s=60109,c=60110,l=60112,u=60113,d=60120,f=60115,m=60116,p=60121,g=60122,h=60117,b=60129,x=60131;if("function"==typeof Symbol&&Symbol.for){var v=Symbol.for;n=v("react.element"),i=v("react.portal"),a=v("react.fragment"),r=v("react.strict_mode"),o=v("react.profiler"),s=v("react.provider"),c=v("react.context"),l=v("react.forward_ref"),u=v("react.suspense"),d=v("react.suspense_list"),f=v("react.memo"),m=v("react.lazy"),p=v("react.block"),g=v("react.server.block"),h=v("react.fundamental"),b=v("react.debug_trace_mode"),x=v("react.legacy_hidden")}function _(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case a:case o:case r:case u:case d:return e;default:switch(e=e&&e.$$typeof){case c:case l:case m:case f:case s:return e;default:return t}}case i:return t}}}},67301:function(e,t,n){"use strict";n(21846)},60049:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return P}});var i=n(92137),a=n(41788),r=n(87757),o=n.n(r),s=n(67294),c=n(83332),l=n(22122),u=n(81253),d=n(96156),f=n(85505),m=n(13522),p=n(81664),g=s.forwardRef((function(e,t){var n=e.classes,i=e.className,a=e.component,r=void 0===a?"div":a,o=e.disableGutters,c=void 0!==o&&o,d=e.fixed,m=void 0!==d&&d,g=e.maxWidth,h=void 0===g?"lg":g,b=(0,u.Z)(e,["classes","className","component","disableGutters","fixed","maxWidth"]);return s.createElement(r,(0,l.Z)({className:(0,f.Z)(n.root,i,m&&n.fixed,c&&n.disableGutters,!1!==h&&n["maxWidth".concat((0,p.Z)(String(h)))]),ref:t},b))})),h=(0,m.Z)((function(e){return{root:(0,d.Z)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",paddingLeft:e.spacing(2),paddingRight:e.spacing(2),display:"block"},e.breakpoints.up("sm"),{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}),disableGutters:{paddingLeft:0,paddingRight:0},fixed:Object.keys(e.breakpoints.values).reduce((function(t,n){var i=e.breakpoints.values[n];return 0!==i&&(t[e.breakpoints.up(n)]={maxWidth:i}),t}),{}),maxWidthXs:(0,d.Z)({},e.breakpoints.up("xs"),{maxWidth:Math.max(e.breakpoints.values.xs,444)}),maxWidthSm:(0,d.Z)({},e.breakpoints.up("sm"),{maxWidth:e.breakpoints.values.sm}),maxWidthMd:(0,d.Z)({},e.breakpoints.up("md"),{maxWidth:e.breakpoints.values.md}),maxWidthLg:(0,d.Z)({},e.breakpoints.up("lg"),{maxWidth:e.breakpoints.values.lg}),maxWidthXl:(0,d.Z)({},e.breakpoints.up("xl"),{maxWidth:e.breakpoints.values.xl})}}),{name:"MuiContainer"})(g),b=n(80838),x=(n(67301),s.forwardRef((function(e,t){var n=e.cellHeight,i=void 0===n?180:n,a=e.children,r=e.classes,o=e.className,c=e.cols,d=void 0===c?2:c,m=e.component,p=void 0===m?"ul":m,g=e.spacing,h=void 0===g?4:g,b=e.style,x=(0,u.Z)(e,["cellHeight","children","classes","className","cols","component","spacing","style"]);return s.createElement(p,(0,l.Z)({className:(0,f.Z)(r.root,o),ref:t,style:(0,l.Z)({margin:-h/2},b)},x),s.Children.map(a,(function(e){if(!s.isValidElement(e))return null;var t=e.props.cols||1,n=e.props.rows||1;return s.cloneElement(e,{style:(0,l.Z)({width:"".concat(100/d*t,"%"),height:"auto"===i?"auto":i*n+h,padding:h/2},e.props.style)})})))}))),v=(0,m.Z)({root:{display:"flex",flexWrap:"wrap",overflowY:"auto",listStyle:"none",padding:0,WebkitOverflowScrolling:"touch"}},{name:"MuiGridList"})(x),_=n(85061),y=n(91510),w=n(61008),k=function(e,t){var n,i,a,r;e&&e.complete&&(e.width/e.height>e.parentElement.offsetWidth/e.parentElement.offsetHeight?((n=e.classList).remove.apply(n,(0,_.Z)(t.imgFullWidth.split(" "))),(i=e.classList).add.apply(i,(0,_.Z)(t.imgFullHeight.split(" ")))):((a=e.classList).remove.apply(a,(0,_.Z)(t.imgFullHeight.split(" "))),(r=e.classList).add.apply(r,(0,_.Z)(t.imgFullWidth.split(" ")))))};var E=s.forwardRef((function(e,t){var n=e.children,i=e.classes,a=e.className,r=(e.cols,e.component),o=void 0===r?"li":r,c=(e.rows,(0,u.Z)(e,["children","classes","className","cols","component","rows"])),d=s.useRef(null);return s.useEffect((function(){!function(e,t){e&&(e.complete?k(e,t):e.addEventListener("load",(function(){k(e,t)})))}(d.current,i)})),s.useEffect((function(){var e=(0,y.Z)((function(){k(d.current,i)}));return window.addEventListener("resize",e),function(){e.clear(),window.removeEventListener("resize",e)}}),[i]),s.createElement(o,(0,l.Z)({className:(0,f.Z)(i.root,a),ref:t},c),s.createElement("div",{className:i.tile},s.Children.map(n,(function(e){return s.isValidElement(e)?"img"===e.type||(0,w.Z)(e,["Image"])?s.cloneElement(e,{ref:d}):e:null}))))})),Z=(0,m.Z)({root:{boxSizing:"border-box",flexShrink:0},tile:{position:"relative",display:"block",height:"100%",overflow:"hidden"},imgFullHeight:{height:"100%",transform:"translateX(-50%)",position:"relative",left:"50%"},imgFullWidth:{width:"100%",position:"relative",transform:"translateY(-50%)",top:"50%"}},{name:"MuiGridListTile"})(E),j=n(77847),C=n.n(j),S=n(67253),W=n.p+"static/jones-885674426137aa7117b916008a9d4f44.jpg",P=function(e){function t(){var t;return(t=e.call(this)||this).state={imageSources:new Array(9).fill(W),buttonsDisabled:!0},t.handleUpdate=function(e){t.setState((function(t){return{data:Object.assign({},t.data,e)}}))},t.on_model_uploaded_callback=function(){var e=(0,i.Z)(o().mark((function e(t){var n,a=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=(0,i.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.model=S.Pel(),a.model.add(S.ugM.dense({units:2,activation:"softmax",inputShape:[616]})),n=S.p_j.adam(.001),a.model.compile({optimizer:n,loss:"binaryCrossentropy",metrics:["accuracy"]}),a.model.fit(a.standardized_features,a.label,{epochs:500,callbacks:{onEpochBegin:function(){return console.log("start epoch")},onEpochEnd:function(){var e=(0,i.Z)(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",console.log("Epoch:"+t+" Loss:"+n.loss));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}}).then((function(){var e=a.model.predict(a.standardized_features);a.model.summary(),e.data().then((function(e){console.log(e)})),t("resolved"),e.dispose()}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:(n=e.sent).compile({optimizer:"sgd",loss:"categoricalCrossentropy"}),n.fit(this.standardized_features,this.label).then((function(){n.predict(a.standardized_features),n.summary()}));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.on_folder_uploaded_callback=function(){var e=(0,i.Z)(o().mark((function e(t){var n,i,a,r,s,c,l,u=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("folder upload done!"),e.next=3,Promise.all(Array.from({length:9},(function(e,n){return u.fileReaderPromiseImage(t,n+6).then((function(e){new Promise((function(t){var n=new Image;n.onload=function(){t(n)},n.src=e})).then((function(e){var t=S.Xhn.fromPixels(e),i=document.getElementById("canvas: "+n),a=i.getContext("2d"),r=document.createElement("canvas");S.Xhn.toPixels(t,r).then((function(){a.drawImage(r,0,0,i.width,i.height),r.remove()}))}))}))}))).then((function(){return console.log("Finished Loading Images")}));case 3:return n=this.findFileIndex(t,"per_object.csv"),i=this.findFileIndex(t,"per_image.csv"),a=this.findFileIndex(t,"example_SETUP.SQL"),r=this.findFileIndex(t,"MyTrainingSet.txt"),e.next=9,Promise.all([C().parsePromise(t.target.files[n],Object.assign({},this.basicPapaConfig,{fastMode:!0})).then((function(e){return e.data})).notify("Finished Loading Object Data"),C().parsePromise(t.target.files[i],this.basicPapaConfig).then((function(e){return e.data})).notify("Finished Loading Image Data"),C().parsePromise(t.target.files[a],Object.assign({},this.basicPapaConfig,{delimiter:","})).then((function(e){return e.data.map((function(e){return e[0].trim()}))})).notify("Finished Loading Setup Data"),C().parsePromise(t.target.files[r],Object.assign({},this.basicPapaConfig,{delimiter:" ",comments:"#"})).then((function(e){return e.data.slice(1)})).notify("Finished Loading Training Data")]).then((function(e){u.object_data=e[0],u.image_data=e[1],u.setup_lines=e[2],u.training_data=e[3]}));case 9:return console.log(this.object_data,this.image_data,this.setup_lines,this.training_data),window.object_data=this.object_data,window.image_data=this.image_data,window.setup_lines=this.setup_lines,window.training_data=this.training_data,this.object_column_lines=this.setup_lines.sliceByValue("CREATE TABLE per_object (","PRIMARY KEY  (ImageNumber,ObjectNumber)"),this.object_column_names=this.object_column_lines.map((function(e){return e.split(" ")[0]})),console.log(this.object_column_names),this.image_column_lines=this.setup_lines.sliceByValue("CREATE TABLE per_image (","PRIMARY KEY  (ImageNumber)"),this.image_column_names=this.image_column_lines.map((function(e){return e.split(" ")[0]})),this.labeled_cells=this.training_data.map((function(e){return u.object_data.find((function(t){return t[0]===e[1]&&t[1]===e[2]}))})),this.training_data_column_names="label imagenum objectnum x y".split(" "),this.object_features_to_use=this.object_column_lines.filter((function(e){return!e.includes("Location")})),this.object_features_to_use_indices=this.object_features_to_use.map((function(e){return u.object_column_lines.indexOf(e)})),this.labeled_features=this.labeled_cells.map((function(e){return u.object_features_to_use_indices.map((function(t){return e[t]}))})),s=new S.odF(this.labeled_features),c=S.Gi7(s,0).variance.sqrt(),l=s.sub(s.mean(0)).div(c),e.next=29,l.array();case 29:this.standardized_features=e.sent,console.log(this.standardized_features),this.labels=[this.training_data.map((function(e){return"positive"===e[0]?1:0})).slice(0,613)],console.log(this.labels),this.setState({buttonsDisabled:!1});case 34:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.handleUpdate=function(e){return t.setState((function(t){return{data:Object.assign({},t.data,e)}}))},C().parsePromise=function(e,t){return new Promise((function(n,i){C().parse(e,Object.assign({},t,{complete:n,error:i}))}))},Promise.prototype.notify=function(e){return this.then((function(t){return console.log(e),t}))},Promise.prototype.debugPrint=function(){return this.then((function(e){return console.log(e),e}))},Array.prototype.sliceByValue=function(e,t){var n=this.indexOf(e),i=this.indexOf(t);return-1===e||-1===t?(console.error("Values not found to slice"),null):this.slice(n,i)},t.basicPapaConfig={worker:!0,skipEmptyLines:!0,dynamicTyping:!0},t}(0,a.Z)(t,e);var n=t.prototype;return n.findFileIndex=function(e,t){return Array.from(e.target.files).findIndex((function(e){return e.name===t}))},n.fileReaderPromiseImage=function(e,t){return new Promise((function(n,i){var a=new FileReader;a.onload=function(){n(a.result)},a.readAsDataURL(e.target.files[t])}))},n.fileReaderPromiseText=function(e,t){return new Promise((function(n,i){var a=new FileReader;a.onload=function(){n(a.result)},a.readAsText(e.target.files[t])}))},n.on_fetch_button_callback=function(){console.log("fetching...")},n.componentDidMount=function(){},n.componentWillUnmount=function(){},n.render=function(){var e=this;return s.createElement("div",null,s.createElement(b.Z,{container:!0,justify:"center",spacing:2,style:{backgroundColor:"#cfe8fc"}},s.createElement(b.Z,{key:0,item:!0},s.createElement(c.Z,{disabled:this.state.buttonsDisabled,variant:"contained",onClick:function(){console.log("Fetch!"),e.on_fetch_button_callback()}},"Fetch")),s.createElement(b.Z,{key:1,item:!0},s.createElement(c.Z,{disabled:this.state.buttonsDisabled,variant:"contained",onClick:function(){return console.log("Train!")}},"Train")),s.createElement(b.Z,{key:2,item:!0},s.createElement(c.Z,{disabled:this.state.buttonsDisabled,variant:"contained",onClick:function(){return console.log("Evaluate!")}},"Evaluate")),s.createElement(b.Z,{key:3,item:!0},s.createElement(c.Z,{variant:"contained",component:"label",onClick:function(){return console.log("Upload Folder!")}},"Upload Data",s.createElement("input",{type:"file",hidden:!0,webkitdirectory:"true",mozdirectory:"true",msdirectory:"true",odirectory:"true",directory:"true",multiple:!0,onChange:function(t){return e.on_folder_uploaded_callback(t)}}))),s.createElement(b.Z,{key:4,item:!0},s.createElement(c.Z,{disabled:this.state.buttonsDisabled,variant:"contained",component:"label",onClick:function(){return console.log("Upload Model!")}},"Upload Model",s.createElement("input",{type:"file",onChange:function(t){return e.on_model_uploaded_callback(t)}}))),s.createElement(b.Z,{key:5,item:!0},s.createElement(c.Z,{disabled:this.state.buttonsDisabled,variant:"contained",component:"label",onClick:function(){return console.log("Download!")}},s.createElement("a",{style:{color:"black",textDecoration:"none"},href:W,download:"jones.jpg"},"Download")))),s.createElement(h,{maxWidth:"xs",spacing:0},s.createElement(v,{cellHeight:"auto",cols:3},[0,1,2,3,4,5,6,7,8].map((function(e){return s.createElement(Z,{key:e,cols:1,spacing:0},s.createElement(c.Z,{onClick:function(){return console.log("Click Image: "+e+"!")}},s.createElement("canvas",{color:"black",height:"100%",width:"100%",id:"canvas: "+e})))})))))},t}(s.Component)}}]);
//# sourceMappingURL=component---src-pages-proof-of-concept-js-4a494fba4d0a6740b904.js.map