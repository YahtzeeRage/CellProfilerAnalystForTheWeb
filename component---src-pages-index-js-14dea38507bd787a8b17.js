(self.webpackChunkgatsby_test=self.webpackChunkgatsby_test||[]).push([[678],{97704:function(e,t,n){"use strict";n.r(t);var r=n(92137),a=n(87757),i=n.n(a),l=n(67294),o=n(96667),c=n(47798),s=n(23729),u=n(80838),m=n(83332),g=n(85080),d=n(90058),f=n(91666),p=n(80633),v=n(79312),E=n(98910),b=n(22019),y=n(68396),k=n(13967),h=(n(37107),n(59274)),Z=n(31261),C=n(8441),N=n(96531),P=n(48498);t.default=function(){var e,t=l.useState(null),n=t[0],a=t[1],w=l.useState(null),x=w[0],I=w[1],R=l.useState(null),L=R[0],S=R[1],D=l.useState(null),T=(D[0],D[1]),U=l.useState(null),j=U[0],z=U[1],B=l.useState($([])),F=B[0],_=B[1],A=function(e){a(null),void 0!==e&&H(e)},H=function(){var e=(0,r.Z)(i().mark((function e(t){var n,r,a,l,o,c,s,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("fetch "+t),n=L.fetchUpToNCellPairsByClass(t,20),r=new y.p,"random"!==t){e.next=14;break}return a=n.map((function(e){var t=x.returnAllImgFileNames(e.ImageNumber).map((function(e){return j.findFile(e)})).map((function(e){return j.fileReaderPromiseImage(e)}));return Promise.all(t).then((function(t){var n=x.getCordsforCellDisplay(e);return r.getDataURLPromise(t,n)}))})),e.t0=$,e.next=8,Promise.all(a);case 8:return e.t1=e.sent,l=(0,e.t0)(e.t1),_(l),console.log(l),console.log(a),e.abrupt("return");case 14:if("positive"!==t){e.next=25;break}return o=n.map((function(e){var t=x.returnAllImgFileNames(e.ImageNumber).map((function(e){return j.findFile(e)})).map((function(e){return j.fileReaderPromiseImage(e)}));return Promise.all(t).then((function(t){var n=x.getCordsforCellDisplay(e);return r.getDataURLPromise(t,n)}))})),e.t2=$,e.next=19,Promise.all(o);case 19:return e.t3=e.sent,c=(0,e.t2)(e.t3),_(c),console.log(c),console.log(o),e.abrupt("return");case 25:if("negative"!==t){e.next=36;break}return s=n.map((function(e){var t=x.returnAllImgFileNames(e.ImageNumber).map((function(e){return j.findFile(e)})).map((function(e){return j.fileReaderPromiseImage(e)}));return Promise.all(t).then((function(t){var n=x.getCordsforCellDisplay(e);return r.getDataURLPromise(t,n)}))})),e.t4=$,e.next=30,Promise.all(s);case 30:return e.t5=e.sent,u=(0,e.t4)(e.t5),_(u),console.log(u),console.log(s),e.abrupt("return");case 36:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=(0,r.Z)(i().mark((function e(t){var n,r,a,l,o,c,s,u,m,g,d,f;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new k.Z(t),z(n),r=new E.Z(t),e.next=5,r.getDataHandlerandStartingTrainingSet();case 5:return a=e.sent,console.log(a),l=a.data_provider,I(l),o=a.training_data.training_table,c=o.getDataColumnsPaired(),console.log(o),s=o.getTrainingLabels(),u=c.map((function(e){var t=e.objectnum,n=e.imagenum;return l.getRow("object_data",{ObjectNumber:t,ImageNumber:n})})),m=a.training_data.features,g=m.filter((function(e){return!e.includes("Location")&&"ObjectNumber"!==e&&"ImageNumber"!==e})),console.log("finished data initialization"),T(d={classifierType:"LogisticRegression",trainingData:u,trainingLabels:s,featuresToUse:g}),console.log("starting initial training"),f=new b.$(l,d),S(f),e.next=24,f.initTrainPromise();case 24:console.log("finished upload");case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function $(e){return{unclassifed:e.map((function(e,t){return{id:t,address:e}})),positive:[],negative:[]}}return l.createElement("div",{style:{resize:"horizontal"}},l.createElement(o.Z,null,l.createElement(c.Z,null,l.createElement(p.Z,{src:f.Z,style:{marginRight:"40%",height:"90px"}})),l.createElement(c.Z,null,l.createElement(s.Z,{style:{color:"black",marginLeft:"50%"}}," ",l.createElement(v.Z,null)))),l.createElement(o.Z,null,l.createElement(u.Z,{container:!0,justify:"center",spacing:2,style:{marginBottom:15}},l.createElement(u.Z,{key:0,item:!0},l.createElement(m.Z,{variant:"contained","aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){a(e.currentTarget)}},"Fetch"),l.createElement(g.Z,{id:"simple-menu",anchorEl:n,keepMounted:!0,open:Boolean(n),onClose:A},l.createElement(d.Z,{onClick:function(){return A("random")}},"Random"),l.createElement(d.Z,{onClick:function(){return A("positive")}},"Positive"),l.createElement(d.Z,{onClick:function(){return A("negative")}},"Negative"))),l.createElement(u.Z,{key:1,item:!0},l.createElement(m.Z,{variant:"contained",onClick:function(){}},"Train")),l.createElement(u.Z,{key:2,item:!0},l.createElement(m.Z,{variant:"contained",onClick:function(){}},"Evaluate")),l.createElement(u.Z,{key:3,item:!0},l.createElement(m.Z,{variant:"contained",component:"label",onClick:function(){return console.log("Upload!")}},"Upload",l.createElement("input",{type:"file",hidden:!0,webkitdirectory:"true",mozdirectory:"true",msdirectory:"true",odirectory:"true",directory:"true",multiple:!0,onChange:function(e){O(e)}}))))),l.createElement(C.d,{onChange:function(e,t,n,r){var a;if(r){var i,l=(0,h.p)(F[e],F[r],t,n);return _(Object.assign({},F,((i={})[e]=l[0],i[r]=l[1],i)))}var o=(0,Z.L)(F[e],t,n);return _(Object.assign({},F,((a={})[e]=o,a)))}},l.createElement("div",null,l.createElement("label",{style:{textAlign:"left",backgroundColor:"white",paddingLeft:"10%",marginBottom:.5}},"Unclassified"),l.createElement("div",{className:"topContainer"},l.createElement(N.$,{className:"dropzone ",id:"unclassifed",boxesPerRow:8,rowHeight:70},F.unclassifed.map((function(e){return l.createElement(P.P,{key:e.id},l.createElement("div",{className:"grid-item"},l.createElement("div",{className:"grid-item-content",style:{backgroundImage:"url("+e.address+")"}})))})))),l.createElement(o.Z,null,l.createElement("label",{style:{textAlign:"left",backgroundColor:"white",paddingLeft:"11%",userSelect:"none",marginBottom:"0.5%"}},"Positive"),l.createElement("label",{style:(e={textAlign:"left",backgroundColor:"white",paddingRight:"8%",marginBottom:0,userSelect:"none",margin:"auto"},e.marginBottom="0.5%",e)},"Negative")),l.createElement(o.Z,null,l.createElement(N.$,{className:"dropzone positive",id:"positive",boxesPerRow:4,rowHeight:70},F.positive.map((function(e){return l.createElement(P.P,{key:e.id},l.createElement("div",{className:"grid-item"},l.createElement("div",{className:"grid-item-content",style:{backgroundImage:"url("+e.address+")"}})))}))),l.createElement(N.$,{className:"dropzone negative",id:"negative",boxesPerRow:4,rowHeight:70},F.negative.map((function(e){return l.createElement(P.P,{key:e.id},l.createElement("div",{className:"grid-item"},l.createElement("div",{className:"grid-item-content",style:{backgroundImage:"url("+e.address+")"}})))})))))))}}}]);
//# sourceMappingURL=component---src-pages-index-js-14dea38507bd787a8b17.js.map