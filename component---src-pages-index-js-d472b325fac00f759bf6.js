(self.webpackChunkgatsby_test=self.webpackChunkgatsby_test||[]).push([[678],{9789:function(e,t,n){"use strict";var a;n.d(t,{Z:function(){return m}});var r=new Uint8Array(16);function i(){if(!a&&!(a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(r)}var o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var l=function(e){return"string"==typeof e&&o.test(e)},s=[],c=0;c<256;++c)s.push((c+256).toString(16).substr(1));var u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]).toLowerCase();if(!l(n))throw TypeError("Stringified UUID is invalid");return n};var m=function(e,t,n){var a=(e=e||{}).random||(e.rng||i)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){n=n||0;for(var r=0;r<16;++r)t[n+r]=a[r];return t}return u(a)}},97704:function(e,t,n){"use strict";n.r(t);var a=n(85061),r=n(92137),i=n(87757),o=n.n(i),l=n(67294),s=n(96667),c=n(47798),u=n(80838),m=n(83332),d=n(44005),g=n(90058),f=n(43638),h=n(80633),p=n(79312),v=n(85505),b=n(10920),E=n(27136),y=n(51474),w=n(49995),Z=n(13508),k=n(54657),C=n(4513),T=n(89952),P=n(65733),S=n(32253),x=n(9901),N=n(31690),L=n(11592),R=n(76047),W=n(77447),A=n(88816),j=n(59477),H=n(9789),U=(n(17710),n(59274)),F=n(31261),I=n(8441),M=n(96531),B=n(48498),D=n(67253),O=n(74243),V=(n(74298),(0,b.Z)((function(e){return{root:{display:"flex",alignItems:"center"},wrapper:{margin:e.spacing(1),position:"relative"},buttonSuccess:{backgroundColor:y.Z[500],"&:hover":{backgroundColor:y.Z[700]}},fabProgress:{color:y.Z[500],position:"absolute",top:-6,left:-6,zIndex:1},buttonProgress:{color:y.Z[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}})));t.default=function(){var e,t=l.useState(null),n=t[0],i=t[1],b=l.useState(null),y=(b[0],b[1],l.useState(null)),z=(y[0],y[1],l.useState(lt([]))),$=z[0],G=z[1],_=l.useState(!1),X=_[0],q=_[1],J=l.useState(!1),K=J[0],Q=J[1],Y=l.useState(!1),ee=Y[0],te=Y[1],ne=l.useState(!1),ae=ne[0],re=ne[1],ie=l.useState(!0),oe=ie[0],le=ie[1],se=l.useState(!1),ce=(se[0],se[1],l.useState(!1)),ue=ce[0],me=ce[1],de=l.useState(!1),ge=de[0],fe=de[1],he=l.useState(!1),pe=he[0],ve=he[1],be=l.useState(!1),Ee=be[0],ye=be[1],we=l.useState(!1),Ze=we[0],ke=we[1],Ce=l.useState(null),Te=Ce[0],Pe=Ce[1],Se=l.useState(null),xe=Se[0],Ne=Se[1],Le=l.useState(null),Re=Le[0],We=Le[1],Ae=l.useState([[0,0],[0,0]]),je=Ae[0],He=Ae[1],Ue=l.useState(null),Fe=Ue[0],Ie=Ue[1],Me=l.useState([]),Be=Me[0],De=Me[1],Oe=l.useState([]),Ve=(Oe[0],Oe[1],l.useState(!1)),ze=Ve[0],$e=Ve[1],Ge=l.useState(null),_e=(Ge[0],Ge[1]),Xe=l.useRef(),qe=l.useRef();l.useEffect((function(){var e=new MessageChannel,t=new MessageChannel,n=Je("../dataWorker.js","dataWebWorker");n.postMessage({action:"connectToCanvasWorker"},[e.port1]),n.postMessage({action:"connectToClassifierWorker"},[t.port1]),Ne(n);var a=Je("../canvasWorker.js","CanvasWebWorker");a.postMessage({action:"connectToDataWorker"},[e.port2]),Pe(a);var r=Je("../classifierWorker.js","classifierWebWorker");r.postMessage({action:"connectToDataWorker"},[t.port2]),We(r)}),[]);var Je=function(e,t){var n=new Worker(e);return n.addEventListener("error",(function(e){console.log("["+t+"] Error",e.message,e)})),n},Ke=V(),Qe=(0,v.Z)(((e={})[Ke.buttonSuccess]=ge,e)),Ye=function(e){i(null),null!=e&&et(e)},et=function(){var e=(0,r.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Fetch!"),!(void 0===t|null==t)){e.next=3;break}return e.abrupt("return");case 3:ve(!0),G({unclassified:[],positive:[],negative:[]}),e.t0=t,e.next="Random"===e.t0?9:"Positive"===e.t0||"Negative"===e.t0?11:"Confusing"===e.t0?13:"TrainingPositive"===e.t0||"TrainingNegative"===e.t0?15:18;break;case 9:return at(xe,"get",{getType:"cellPairs",getArgs:{amount:16}}).then((function(e){var t=e.data.getResult;return De(t),at(Te,"get",{getType:"blobUrlsFromCellPairs",getArgs:{cellPairs:t}})})).then((function(e){var t=lt(e.data.blobUrls);G(t),ve(!1)})),e.abrupt("break",18);case 11:return at(xe,"get",{getType:"cellPairs",getArgs:{amount:100}}).then((function(e){var n=e.data.getResult;return at(Re,"predictFilterCellPairs",{cellPairs:n,classType:t})})).then((function(e){var t=e.data.filteredCellPairs,n=t.slice(0,16);return De(t),at(Te,"get",{getType:"blobUrlsFromCellPairs",getArgs:{cellPairs:n}})})).then((function(e){var t=lt(e.data.blobUrls);G(t),ve(!1)})),e.abrupt("break",18);case 13:return at(xe,"get",{getType:"cellPairs",getArgs:{amount:100}}).then((function(e){var t=e.data.getResult;return at(Re,"confusingFilterCellPairs",{cellPairs:t})})).then((function(e){var t=e.data.sortedCellPairs.slice(0,16);return De(t),at(Te,"get",{getType:"blobUrlsFromCellPairs",getArgs:{cellPairs:t}})})).then((function(e){var t=lt(e.data.blobUrls);G(t),ve(!1)})),e.abrupt("break",18);case 15:return n=Fe.trainingData.map((function(e){return{ImageNumber:e[0],ObjectNumber:e[1]}})),at(Re,"predictFilterCellPairs",{cellPairs:n,classType:"TrainingPositive"===t?"Positive":"Negative"}).then((function(e){var t=e.data.filteredCellPairs;return De(t),at(Te,"get",{getType:"blobUrlsFromCellPairs",getArgs:{cellPairs:t}})})).then((function(e){var t=lt(e.data.blobUrls);G(t)})),e.abrupt("break",18);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),tt=function(){var e=(0,r.Z)(o().mark((function e(){var t,n,r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Train!"),t=$.positive.map((function(e){return Be[e.id]})),n=$.negative.map((function(e){return Be[e.id]})),r=t.concat(n),i=new Array(t.length).fill(1).concat(new Array(n.length).fill(0)),$e(!1),G(lt([])),De([]),at(xe,"get",{getType:"objectRowsFromCellpairs",getArgs:{cellPairs:r}}).then((function(e){var t=e.data.getResult,n={classifierType:"LogisticRegression",trainingData:[].concat((0,a.Z)(Fe.trainingData),(0,a.Z)(t)),trainingLabels:[].concat((0,a.Z)(Fe.trainingLabels),(0,a.Z)(i)),featureIndicesToUse:Fe.featureIndicesToUse};return nt(n)}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),nt=function(e){ke(!0);var t=null,n=function(e){if(t==e.data.uuid)switch(e.data.action){case"updateTrainingLossCanvas":O.show.history(Xe.current,e.data.trainLogs,e.data.ticks);break;case"updateTrainingAccuracyCanvas":O.show.history(qe.current,e.data.trainLogs,e.data.ticks);break;default:console.log("didn't render bad action")}};at(Re,"startTrainingGraphsConnection",{}).then((function(a){return t=a.data.uuid,Re.addEventListener("message",n),at(Re,"train",{trainingObject:e})})).then((function(){return at(Re,"endTrainingGraphsConnection",{}),Re.removeEventListener("message",n),at(Re,"confusionMatrix")})).then((function(e){var t=e.data.confusionMatrix;He(t)})).then((function(){Ie(e),ke(!1)}))},at=function(e,t,n){var a=(0,H.Z)();return new Promise((function(r){e.addEventListener("message",(function t(n){n.data.uuid===a&&(e.removeEventListener("message",t),r(n))})),e.postMessage(Object.assign({action:t},n,{uuid:a}))}))},rt=function(){var e=(0,r.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Upload!"),me(!0),at(xe,"init",{fileListObject:t.target.files}).then((function(){return at(xe,"get",{getType:"trainingObject"})})).then((function(e){var t=e.data.getResult;return nt(t)})).then((function(){me(!1),fe(!0),q(!0),Q(!0),re(!0),te(!0),le(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),it=function(){var e=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Score All!"),ze){e.next=4;break}return console.log("Score All!"),e.abrupt("return",at(Re,"scoreObjectData").then((function(e){var t=e.data.scoreTableObject;console.log(t),_e(t),$e(!0)})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ot=function(){var e=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Download!"),e.abrupt("return",at(Re,"getClassifier").then((function(e){D.FBF("indexeddb://"+Fe.classifierType).then((function(e){e.save("downloads://"+Fe.classifierType)}))})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function lt(e){return{unclassified:e.map((function(e,t,n){return{id:t,address:e,info:"cell info, biology stuff"}})),positive:[],negative:[]}}return l.createElement(I.d,{onChange:function(e,t,n,a){var r;if(a){var i,o=(0,U.p)($[e],$[a],t,n);return G(Object.assign({},$,((i={})[e]=o[0],i[a]=o[1],i)))}var l=(0,F.L)($[e],t,n);return G(Object.assign({},$,((r={})[e]=l,r)))}},l.createElement("div",{style:{overflowX:"hidden",height:"100%",width:"100%"}},l.createElement(s.Z,{style:{}},l.createElement(h.Z,{src:f.Z,style:{marginLeft:"11%",height:"30%",width:"25%",position:"relative",maxHeight:"125px",marginBottom:"2%",marginTop:"2%"}}),l.createElement(c.Z,{style:{left:"40%"}},l.createElement("div",{className:Ke.root},l.createElement("div",{className:Ke.wrapper},l.createElement(W.ZP,{title:"Load Data","aria-label":"load data"},l.createElement(w.Z,{"aria-label":"save",color:"primary",component:"label",className:Qe,style:{height:"5vw",width:"5vw"}},ge?l.createElement(Z.Z,{style:{height:"50%",width:"50%"}}):l.createElement(k.Z,{style:{height:"50%",width:"50%"}}),l.createElement("input",{type:"file",hidden:!0,webkitdirectory:"true",mozdirectory:"true",msdirectory:"true",odirectory:"true",directory:"true",multiple:!0,onChange:function(e){rt(e)},disabled:!oe}))),ue&&l.createElement(E.Z,{className:Ke.fabProgress,style:{height:"6vw",width:"6vw",marginTop:"4%",marginRight:"4%"}})))),l.createElement(c.Z,{style:{left:"15%",marginTop:"1%"}},l.createElement(W.ZP,{title:"Download","aria-label":"download"},l.createElement(w.Z,{"aria-label":"save",color:"primary",component:"label",disabled:!ae,onClick:ot,style:{height:"5vw",width:"5vw"}}," ",l.createElement(p.Z,{style:{height:"50%",width:"50%"}}))))),l.createElement(s.Z,null,l.createElement(u.Z,{container:!0,justify:"center",spacing:2,style:{marginBottom:15}},l.createElement(u.Z,{key:0,item:!0},l.createElement(m.Z,{disabled:!X,variant:"contained","aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){i(e.currentTarget)}},"Fetch"),l.createElement(d.Z,{id:"simple-menu",anchorEl:n,keepMounted:!0,open:Boolean(n),onClose:function(){return Ye(null)}},l.createElement(g.Z,{onClick:function(){return Ye("Random")}},"Random"),l.createElement(g.Z,{onClick:function(){return Ye("Positive")}},"Positive"),l.createElement(g.Z,{onClick:function(){return Ye("Negative")}},"Negative"),l.createElement(g.Z,{onClick:function(){ye(!0)}},"By Image"),l.createElement(g.Z,{onClick:function(){return Ye("TrainingPositive")}},"Training Set Positive"),l.createElement(g.Z,{onClick:function(){return Ye("TrainingNegative")}},"Training Set Negative"),l.createElement(g.Z,{onClick:function(){return Ye("Confusing")}},"Confusing"),l.createElement(C.Z,{open:Ee,onClose:function(){return Ye(null)}},l.createElement(x.Z,null,"Fetch By Image"),l.createElement(P.Z,null,l.createElement(S.Z,null,"Select the image number you would like to fetch from."),l.createElement("form",{noValidate:!0},l.createElement(N.Z,null,l.createElement(L.Z,null,"Image"),l.createElement(R.Z,{autoFocus:!0},l.createElement(g.Z,{value:"1"},"1"),l.createElement(g.Z,{value:"2"},"2"),l.createElement(g.Z,{value:"3"},"3"),l.createElement(g.Z,{value:"4"},"4"),l.createElement(g.Z,{value:"5"},"5"))))),l.createElement(T.Z,null,l.createElement(m.Z,{onClick:function(){ye(!1)},color:"primary"},"Close"))))),l.createElement(u.Z,{key:1,item:!0},l.createElement(m.Z,{disabled:!K,variant:"contained",onClick:tt},"Train"),l.createElement(C.Z,{fullWidth:500,open:Ze},l.createElement(x.Z,null,"Loss and Accuracy"),l.createElement(P.Z,null,l.createElement("div",{width:300,ref:qe}),l.createElement("div",{width:300,ref:Xe})))),l.createElement(u.Z,{key:2,item:!0},ee?l.createElement(A.default,{confusionMatrix:je}):l.createElement(m.Z,{disabled:!ee,variant:"contained",onClick:function(){}},"Evaluate")),l.createElement(u.Z,{key:3,item:!0},ee?l.createElement(j.default,{handleScoreAll:it}):l.createElement(m.Z,{disabled:!ee,variant:"contained",onClick:it},"Score All")))),l.createElement("div",null,l.createElement("label",{style:{textAlign:"left",backgroundColor:"white",paddingLeft:"10%",marginBottom:"0.5%",userSelect:"none"}},"Unclassified"," "),l.createElement("div",null,l.createElement(M.$,{className:"dropzone ",id:"unclassified",boxesPerRow:8,rowHeight:80,style:{height:"20vw",maxHeight:200,minHeight:150,marginBottom:10,marginLeft:"10%",width:"80%"}},pe?l.createElement(E.Z,{style:{height:"6vw",width:"6vw",marginTop:"6%",marginLeft:"45%"}}):$.unclassified.map((function(e){return l.createElement(B.P,{className:"hoverTest",style:{height:"15vw",width:"15vw",minHeight:80,minWidth:80,maxHeight:120,maxWidth:120,padding:10},key:e.id},l.createElement("div",{className:"grid-item"},l.createElement("div",{className:"grid-item-content",style:{backgroundImage:"url("+e.address+")",height:"5vw",width:"5vw"}},l.createElement("span",{className:"hoverText"},e.info))))})))),l.createElement(s.Z,null,l.createElement("label",{style:{textAlign:"left",backgroundColor:"white",paddingLeft:"11%",userSelect:"none",marginBottom:"0.5%",marginTop:0}},"Positive"),l.createElement("label",{style:{textAlign:"left",backgroundColor:"white",paddingRight:"8%",userSelect:"none",margin:"auto",marginBottom:"0.5%",marginTop:0}},"Negative")),l.createElement(s.Z,null,l.createElement(M.$,{className:"dropzone positive",id:"positive",boxesPerRow:4,rowHeight:0,style:{height:"20vw",maxHeight:200,minHeight:150}},$.positive.map((function(e){return l.createElement(B.P,{className:"hoverTest",style:{height:"15vw",width:"15vw",minHeight:80,minWidth:80,maxHeight:105,maxWidth:105,padding:10},key:e.id},l.createElement("div",{className:"grid-item"},l.createElement("div",{className:"grid-item-content",style:{backgroundImage:"url("+e.address+")",height:"5vw",width:"5vw"}},l.createElement("span",{className:"hoverText"},e.info))))}))),l.createElement(M.$,{className:"dropzone negative",id:"negative",boxesPerRow:4,rowHeight:80,style:{height:"20vw",maxHeight:200,minHeight:150}},$.negative.map((function(e){return l.createElement(B.P,{className:"hoverTest",style:{height:"15vw",width:"15vw",minHeight:80,minWidth:80,maxHeight:105,maxWidth:105,padding:10},key:e.address},l.createElement("div",{className:"grid-item"},l.createElement("div",{className:"grid-item-content",style:{backgroundImage:"url("+e.address+")",height:"5vw",width:"5vw"}},l.createElement("span",{className:"hoverText"},e.info))))})))))))}},17710:function(e,t,n){"use strict";t.Z=n.p+"static/jones-885674426137aa7117b916008a9d4f44.jpg"}}]);
//# sourceMappingURL=component---src-pages-index-js-d472b325fac00f759bf6.js.map