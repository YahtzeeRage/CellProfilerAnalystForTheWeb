(self.webpackChunkgatsby_test=self.webpackChunkgatsby_test||[]).push([[612],{68127:function(e,t,n){"use strict";n.r(t);var a=n(85061),i=n(92137),r=n(87757),l=n.n(r),o=n(67294),s=n(96667),c=n(47798),m=n(80838),u=n(83332),d=n(44005),g=n(90058),h=n(43638),f=n(80633),p=n(79312),v=n(85505),E=n(10920),b=n(27136),w=n(51474),y=n(49995),Z=n(13508),k=n(54657),N=n(98910),x=n(22019),C=n(49224),S=n(39331),T=n(4513),P=n(89952),H=n(65733),I=n(32253),L=n(9901),j=n(31690),B=n(11592),R=n(76047),O=n(77447),_=n(88816),A=n(59477),D=n(59274),z=n(31261),W=n(8441),U=n(96531),$=n(48498),F=(n(34058),n(74298),(0,E.Z)((function(e){return{root:{display:"flex",alignItems:"center"},wrapper:{margin:e.spacing(1),position:"relative"},buttonSuccess:{backgroundColor:w.Z[500],"&:hover":{backgroundColor:w.Z[700]}},fabProgress:{color:w.Z[500],position:"absolute",top:-6,left:-6,zIndex:1},buttonProgress:{color:w.Z[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}})));t.default=function(){var e,t=o.useState(null),n=t[0],r=t[1],E=o.useState(null),w=E[0],M=E[1],V=o.useState(null),X=V[0],q=V[1],G=o.useState(null),J=G[0],K=G[1],Q=o.useState(Xe([])),Y=Q[0],ee=Q[1],te=o.useState(null),ne=te[0],ae=te[1],ie=o.useState(null),re=(ie[0],ie[1]),le=o.useState(null),oe=le[0],se=le[1],ce=o.useState(!1),me=ce[0],ue=ce[1],de=o.useState(!1),ge=de[0],he=de[1],fe=o.useState(!1),pe=fe[0],ve=fe[1],Ee=o.useState(!1),be=Ee[0],we=Ee[1],ye=o.useState(!0),Ze=ye[0],ke=ye[1],Ne=o.useState(!1),xe=(Ne[0],Ne[1]),Ce=o.useState(!1),Se=Ce[0],Te=Ce[1],Pe=o.useState(!1),He=Pe[0],Ie=Pe[1],Le=o.useState(!1),je=Le[0],Be=Le[1],Re=o.useState(!1),Oe=Re[0],_e=Re[1],Ae=F(),De=(0,v.Z)(((e={})[Ae.buttonSuccess]=He,e)),ze=function(e){r(null),void 0!==e&&$e(e)},We=function(){ue(!1),he(!1),we(!1),ve(!1)},Ue=function(){ue(!0),he(!0),we(!0),ve(!0)},$e=function(){var e=(0,i.Z)(l().mark((function e(t){var n,a,i,r,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Be(!0),We(),ee({unclassified:[],positive:[],negative:[]}),n=new x.$(w,X),e.next=7,n.initTrainPromise();case 7:return re(t),a=n.fetchUpToNCellPairsByClass(t,20),i=new C.z(J,w),e.next=12,i.getObjsToURLs(a);case 12:return r=e.sent,o=Xe(r),ee(o),ae(new S.e(a,r)),Ue(),ae(a,r),Ue(),Be(!1),e.abrupt("return");case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Fe=function(){var e=(0,i.Z)(l().mark((function e(){var t,n,i,r,o,s,c,m,u,d,g,h;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:We(),t=Y.negative.map((function(e){return e.id})),n=Y.positive.map((function(e){return e.id})),console.log(t,Y),ne.setClassByIndexArray("negative",t),ne.setClassByIndexArray("positive",n),i=ne.getPairsByClass("negative"),r=ne.getPairsByClass("positive"),o=i.map((function(e){return w.getRow("object_data",{ImageNumber:e.ImageNumber,ObjectNumber:e.ObjectNumber})})),s=r.map((function(e){return w.getRow("object_data",{ImageNumber:e.ImageNumber,ObjectNumber:e.ObjectNumber})})),c=[].concat((0,a.Z)(o),(0,a.Z)(s)),m=new Array(o.length).fill(0),u=new Array(s.length).fill(1),d=m.concat(u),g={classifierType:"LogisticRegression",trainingData:[].concat((0,a.Z)(c),(0,a.Z)(X.trainingData)),trainingLabels:[].concat((0,a.Z)(d),(0,a.Z)(X.trainingLabels)),featuresToUse:oe},console.log(g),q(g),h={unclassified:Y.unclassified,positive:[],negative:[]},ee(h),console.log("finished train"),Ue();case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Me=function(){var e=(0,i.Z)(l().mark((function e(t){var n,a,i,r,o,s,c,m,u,d;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ke(!1),K(t),n=new N.Z(t),e.next=5,n.getDataHandlerandStartingTrainingSet();case 5:a=e.sent,i=a.data_provider,M(i),r=a.training_data.training_table,o=r.getDataColumnsPaired(),s=r.getTrainingLabels(),c=o.map((function(e){var t=e.objectnum,n=e.imagenum;return i.getRow("object_data",{ObjectNumber:t,ImageNumber:n})})),m=a.training_data.features,u=m.filter((function(e){return!e.includes("Location")&&"ObjectNumber"!==e&&"ImageNumber"!==e})),se(u),console.log("finished data initialization"),q(d={classifierType:"LogisticRegression",trainingData:c,trainingLabels:s,featuresToUse:u}),ue(!0),he(!0),we(!0),ve(!0),console.log("finished upload"),q(d),ue(!0),he(!0),we(!0),xe(!0),ve(!0),ke(!1),console.log("finished upload"),Te(!1),Ie(!0);case 33:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ve=function(){var e=(0,i.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return We(),t=new x.$(w,X),e.next=4,t.initTrainPromise();case 4:t.userDownloadClassifierSpecPromise(),Ue();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function Xe(e){return{unclassified:e.map((function(e,t,n){return{id:t,address:e,info:"cell info, biology stuff"}})),positive:[],negative:[]}}var qe=function(){_e(!1)};return o.createElement(W.d,{onChange:function(e,t,n,a){var i;if(a){var r,l=(0,D.p)(Y[e],Y[a],t,n);return ee(Object.assign({},Y,((r={})[e]=l[0],r[a]=l[1],r)))}var o=(0,z.L)(Y[e],t,n);return ee(Object.assign({},Y,((i={})[e]=o,i)))}},o.createElement("div",{style:{overflowX:"hidden",hieght:"100%",width:"100%"}},o.createElement(s.Z,null,o.createElement(f.Z,{src:h.Z,style:{marginLeft:"10%",height:"30%",width:"25%",position:"relative",maxHeight:"125px",marginBottom:"1%"}}),o.createElement(c.Z,{style:{left:"40%"}},o.createElement("div",{className:Ae.root},o.createElement("div",{className:Ae.wrapper},o.createElement(O.ZP,{title:"Load Data","aria-label":"load data"},o.createElement(y.Z,{"aria-label":"save",color:"primary",component:"label",className:De,style:{height:"5vw",width:"5vw"}},He?o.createElement(Z.Z,{style:{hieght:"50%",width:"50%"}}):o.createElement(k.Z,{style:{hieght:"50%",width:"50%"}}),o.createElement("input",{type:"file",hidden:!0,webkitdirectory:"true",mozdirectory:"true",msdirectory:"true",odirectory:"true",directory:"true",multiple:!0,onChange:function(e){Me(e)},disabled:!Ze}))),Se&&o.createElement(b.Z,{className:Ae.fabProgress,style:{height:"6vw",width:"6vw",marginTop:"4%",marginRight:"4%"}})))),o.createElement(c.Z,{style:{left:"15%",marginTop:".75%"}},o.createElement(O.ZP,{title:"Download","aria-label":"download"},o.createElement(y.Z,{"aria-label":"save",color:"primary",component:"label",disabled:!be,onClick:Ve,style:{height:"5vw",width:"5vw"}}," ",o.createElement(p.Z,{style:{hieght:"50%",width:"50%"}}))))),o.createElement(s.Z,null,o.createElement(m.Z,{container:!0,justify:"center",spacing:2,style:{marginBottom:15}},o.createElement(m.Z,{key:0,item:!0},o.createElement(u.Z,{disabled:!me,variant:"contained","aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){r(e.currentTarget)}},"Fetch"),o.createElement(d.Z,{id:"simple-menu",anchorEl:n,keepMounted:!0,open:Boolean(n),onClose:ze},o.createElement(g.Z,{onClick:function(){return ze("random")}},"Random"),o.createElement(g.Z,{onClick:function(){return ze("positive")}},"Positive"),o.createElement(g.Z,{onClick:function(){return ze("negative")}},"Negative"),o.createElement(g.Z,{onClick:function(){_e(!0)}},"By Image"),o.createElement(T.Z,{open:Oe,onClose:qe},o.createElement(L.Z,null,"Fetch By Image"),o.createElement(H.Z,null,o.createElement(I.Z,null,"Select the image number you would like to fetch from."),o.createElement("form",{noValidate:!0},o.createElement(j.Z,null,o.createElement(B.Z,null,"Image"),o.createElement(R.Z,{autoFocus:!0},o.createElement(g.Z,{value:"1"},"1"),o.createElement(g.Z,{value:"2"},"2"),o.createElement(g.Z,{value:"3"},"3"),o.createElement(g.Z,{value:"4"},"4"),o.createElement(g.Z,{value:"5"},"5"))))),o.createElement(P.Z,null,o.createElement(u.Z,{onClick:qe,color:"primary"},"Close"))))),o.createElement(m.Z,{key:1,item:!0},o.createElement(u.Z,{disabled:!ge,variant:"contained",onClick:Fe},"Train")),o.createElement(m.Z,{key:2,item:!0},pe?o.createElement(_.default,null):o.createElement(u.Z,{disabled:!pe,variant:"contained",onClick:function(){}},"Evaluate")),o.createElement(m.Z,{key:3,item:!0},pe?o.createElement(A.default,null):o.createElement(u.Z,{disabled:!pe,variant:"contained",onClick:function(){}},"Score All")))),o.createElement("div",null,o.createElement("label",{style:{textAlign:"left",backgroundColor:"white",paddingLeft:"10%",marginBottom:"0.5%",userSelect:"none"}},"Unclassified "),o.createElement("div",null,o.createElement(U.$,{className:"dropzone ",id:"unclassified",boxesPerRow:8,rowHeight:80,style:{height:"20vw",maxHeight:200,minHeight:150,marginBottom:10,marginLeft:"10%",width:"80%"}},je?o.createElement(b.Z,{style:{hieght:"7%",width:"7%",marginTop:"8%",marginLeft:"45%"}}):Y.unclassified.map((function(e){return o.createElement($.P,{className:"hoverTest",style:{height:"10vw",width:"10vw",minHeight:80,minWidth:80,maxHeight:105,maxWidth:105,padding:10},key:e.id},o.createElement("div",{className:"grid-item"},o.createElement("div",{className:"grid-item-content",style:{backgroundImage:"url("+e.address+")"}},o.createElement("span",{className:"hoverText"},e.info))))})))),o.createElement(s.Z,null,o.createElement("label",{style:{textAlign:"left",backgroundColor:"white",paddingLeft:"11%",userSelect:"none",marginBottom:"0.5%",marginTop:0}},"Positive"),o.createElement("label",{style:{textAlign:"left",backgroundColor:"white",paddingRight:"8%",userSelect:"none",margin:"auto",marginBottom:"0.5%",marginTop:0}},"Negative")),o.createElement(s.Z,null,o.createElement(U.$,{className:"dropzone positive",id:"positive",boxesPerRow:4,rowHeight:80,style:{height:"20vw",maxHeight:200,minHeight:150}},Y.positive.map((function(e){return o.createElement($.P,{className:"hoverTest",style:{height:"10vw",width:"10vw",minHeight:80,minWidth:80,maxHeight:105,maxWidth:105,padding:10},key:e.id},o.createElement("div",{className:"grid-item"},o.createElement("div",{className:"grid-item-content",style:{backgroundImage:"url("+e.address+")"}},o.createElement("span",{className:"hoverText"},e.info))))}))),o.createElement(U.$,{className:"dropzone negative",id:"negative",boxesPerRow:4,rowHeight:80,style:{height:"20vw",maxHeight:200,minHeight:150}},Y.negative.map((function(e){return o.createElement($.P,{className:"hoverTest",style:{height:"10vw",width:"10vw",minHeight:80,minWidth:80,maxHeight:105,maxWidth:105,padding:10},key:e.address},o.createElement("div",{className:"grid-item"},o.createElement("div",{className:"grid-item-content",style:{backgroundImage:"url("+e.address+")"}},o.createElement("span",{className:"hoverText"},e.info))))})))))))}}}]);
//# sourceMappingURL=component---src-pages-test-uimvp-js-43e63abb5f19ef692caf.js.map