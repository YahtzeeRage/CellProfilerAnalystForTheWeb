{"version":3,"sources":["webpack://gatsby-test/./src/pages/TestUIMVP.js"],"names":["useStyles","makeStyles","theme","root","display","alignItems","wrapper","margin","spacing","position","buttonSuccess","backgroundColor","green","fabProgress","color","top","left","zIndex","buttonProgress","marginTop","marginLeft","React","anchorEl","setAnchorEl","dataProvider","setDataProvider","trainingObject","setTrainingObject","fileListObject","setFileListObject","constructTileState","tileState","setTileState","imageGridManager","setImageGridManager","setLastFetchState","featuresToUse","setFeaturesToUseState","fetchButtonEnabled","setFetchButtonEnabled","trainButtonEnabled","setTrainButtonEnabled","evaluateButtonEnabled","setEvaluateButtonEnabled","downloadButtonEnabled","setDownloadButtonEnabled","uploadButtonEnabled","setUploadButtonEnabled","setscoreAllButtonEnabled","uploading","setUploading","success","setSuccess","fetching","setFetching","openFetchDropdown","setOpenFetchDropdown","classes","buttonClassname","clsx","handleCloseFetchDropDown","fetchType","undefined","handleFetch","disableIterationButtons","enableIterationButtons","unclassified","positive","negative","classifierManager","ClassifierManager","initTrainPromise","classedCellPairObjects","fetchUpToNCellPairsByClass","ih","ImageHandler","getObjsToURLs","dataURLS","newTileState","ImageGridManager","handleTrain","negativeIDs","map","item","id","positiveIDs","console","log","setClassByIndexArray","negativeCellPairs","getPairsByClass","positiveCellPairs","negativeObjectDataRows","cellPair","getRow","ImageNumber","ObjectNumber","positiveObjectDataRows","trainingDataAddition","negativeLabels","Array","length","fill","positiveLabels","trainingLabelsAddition","concat","UpdatedTrainingObject","classifierType","trainingData","trainingLabels","clearedTileState","handleUpload","uploadHandler","UploadHandler","getDataHandlerandStartingTrainingSet","uploadReturnObject","data_provider","trainingTable","training_data","training_table","trainingDataTable","getDataColumnsPaired","getTrainingLabels","initialTrainingData","row_object","totalFeatures","features","tempFeaturesToUse","filter","elem","includes","initialTrainingObject","handleDownload","userDownloadClassifierSpecPromise","dataURLs","dataURL","idx","info","address","handleCloseFetchDropdown","onChange","sourceId","sourceIndex","targetIndex","targetId","result","move","swap","style","overflowX","hieght","width","src","logo","height","maxHeight","marginBottom","className","title","aria-label","component","type","hidden","webkitdirectory","mozdirectory","msdirectory","odirectory","directory","multiple","eventObject","disabled","marginRight","onClick","container","justify","key","variant","aria-controls","aria-haspopup","event","currentTarget","keepMounted","open","Boolean","onClose","noValidate","autoFocus","value","textAlign","paddingLeft","userSelect","boxesPerRow","rowHeight","minHeight","minWidth","maxWidth","padding","backgroundImage","paddingRight"],"mappings":"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","file":"component---src-pages-test-uimvp-js-43e63abb5f19ef692caf.js","sourcesContent":["import React from 'react';\r\nimport { Row, Col, Container} from \"reactstrap\";\r\nimport {Box, Button, Grid, IconButton, Menu, MenuItem, Card}from '@material-ui/core'; \r\nimport logo from '../cpa_logo(blue).svg';\r\nimport {Image, Dropdown, DropdownButton} from 'react-bootstrap';\r\nimport \"bootstrap/dist/css/bootstrap.css\";\r\nimport SaveAltIcon from '@material-ui/icons/SaveAlt';\r\nimport clsx from 'clsx';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport { green } from '@material-ui/core/colors';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\r\n\r\nimport UploadHandler from '../classes/UploadHandler'\r\nimport {ClassifierManager} from '../classes/ClassifierManager'\r\nimport {ImageHandler}  from '../classes/ImageHandler'\r\nimport UserUploadFileHandler from '../classes/UserUploadFileHandler'\r\nimport {ImageGridManager}  from '../classes/imGridManager'\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport Select from '@material-ui/core/Select';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\n//import UploadButton from './UploadButton'\r\n\r\nimport Evaluate from './AbbyUIButtons/UIEvaluateButton'\r\nimport ScoreAll from './AbbyUIButtons/UIScoreAllButton'\r\n\r\n\r\nimport {\r\n    GridContextProvider,\r\n    GridDropZone,\r\n    GridItem,\r\n    swap,\r\n    move\r\n  } from \"react-grid-dnd\";\r\n  \r\n  import \"../dndstyles.css\";\r\nimport { truncatedNormal } from '@tensorflow/tfjs-core';\r\nimport UploadButton from './UploadButton';\r\n\r\n\r\n  const useStyles = makeStyles((theme) => ({\r\n    root: {\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n    },\r\n    wrapper: {\r\n      margin: theme.spacing(1),\r\n      position: 'relative',\r\n    },\r\n    buttonSuccess: {\r\n      backgroundColor: green[500],\r\n      '&:hover': {\r\n        backgroundColor: green[700],\r\n      },\r\n    },\r\n    fabProgress: {\r\n      color: green[500],\r\n      position: 'absolute',\r\n      top: -6,\r\n      left: -6,\r\n      zIndex: 1,\r\n    },\r\n    buttonProgress: {\r\n      color: green[500],\r\n      position: 'absolute',\r\n      top: '50%',\r\n      left: '50%',\r\n      marginTop: -12,\r\n      marginLeft: -12,\r\n    },\r\n    \r\n  }));\r\n\r\n\r\nfunction TestUIMVP(){\r\n    \r\n    \r\n    const [anchorEl, setAnchorEl] = React.useState(null);\r\n    const [dataProvider, setDataProvider] = React.useState(null)\r\n\r\n    // var classifierManager = null;\r\n    // const [classifierManager, setClassifierManager] = React.useState(null)\r\n    const [trainingObject, setTrainingObject] = React.useState(null)\r\n    const [fileListObject, setFileListObject] = React.useState(null)\r\n    const [tileState, setTileState] = React.useState( constructTileState([]) );\r\n    const [imageGridManager, setImageGridManager] = React.useState(null)\r\n    const [lastFetchState, setLastFetchState] = React.useState(null)\r\n    const [featuresToUse, setFeaturesToUseState] = React.useState(null)\r\n\r\n    const [fetchButtonEnabled, setFetchButtonEnabled] = React.useState(false)\r\n    const [trainButtonEnabled, setTrainButtonEnabled] = React.useState(false)\r\n    const [evaluateButtonEnabled, setEvaluateButtonEnabled] = React.useState(false)\r\n    const [downloadButtonEnabled, setDownloadButtonEnabled] = React.useState(false)\r\n    const [uploadButtonEnabled, setUploadButtonEnabled] = React.useState(true)\r\n    const [scoreAllButtonEnabled, setscoreAllButtonEnabled] = React.useState(false)\r\n    const [uploading, setUploading] = React.useState(false)\r\n    const [success, setSuccess] = React.useState(false)\r\n    const [fetching, setFetching] = React.useState(false)\r\n    const [openFetchDropdown, setOpenFetchDropdown] = React.useState(false);\r\n    \r\n    const classes = useStyles();\r\n    const buttonClassname = clsx({\r\n      [classes.buttonSuccess]: success,\r\n    });\r\n\r\n    const N = 20\r\n\r\n    const handleClickFetchDropDown = (event) => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    const handleCloseFetchDropDown = (fetchType) => {\r\n        setAnchorEl(null)\r\n         if (fetchType !== undefined) {\r\n            handleFetch(fetchType)\r\n         }\r\n         \r\n    };\r\n\r\n    const disableIterationButtons = () => {\r\n      setFetchButtonEnabled(false)\r\n      setTrainButtonEnabled(false)\r\n      setDownloadButtonEnabled(false)\r\n      setEvaluateButtonEnabled(false)\r\n\r\n    }\r\n    const enableIterationButtons = () => {\r\n      setFetchButtonEnabled(true)\r\n      setTrainButtonEnabled(true)\r\n      setDownloadButtonEnabled(true)\r\n      setEvaluateButtonEnabled(true)\r\n\r\n    }\r\n\r\n    const handleFetch = async (fetchType) => {\r\n      setFetching(true)\r\n      disableIterationButtons()\r\n      const emptyTileState = { unclassified: [], positive: [], negative: []}\r\n      setTileState(emptyTileState)\r\n      const classifierManager = new ClassifierManager(dataProvider, trainingObject)\r\n      await classifierManager.initTrainPromise()\r\n      setLastFetchState(fetchType)\r\n      const classedCellPairObjects = classifierManager.fetchUpToNCellPairsByClass(fetchType, N)\r\n      const ih = new ImageHandler(fileListObject, dataProvider)\r\n      const dataURLS = await ih.getObjsToURLs(classedCellPairObjects)\r\n      const newTileState = constructTileState(dataURLS)\r\n      setTileState(newTileState)\r\n      setImageGridManager(new ImageGridManager(classedCellPairObjects, dataURLS))\r\n      enableIterationButtons()\r\n      setImageGridManager(classedCellPairObjects, dataURLS)\r\n      enableIterationButtons()\r\n      setFetching(false)\r\n      return\r\n    }\r\n    \r\n\r\n\r\n  const handleTrain = async () => {\r\n\r\n    disableIterationButtons()\r\n\r\n      const negativeIDs = tileState.negative.map(item => item.id)\r\n      const positiveIDs = tileState.positive.map(item => item.id)\r\n      console.log(negativeIDs, tileState)\r\n      imageGridManager.setClassByIndexArray('negative', negativeIDs)\r\n      imageGridManager.setClassByIndexArray('positive', positiveIDs)\r\n\r\n      const negativeCellPairs = imageGridManager.getPairsByClass('negative')\r\n      const positiveCellPairs = imageGridManager.getPairsByClass('positive')\r\n \r\n      const negativeObjectDataRows = negativeCellPairs.map(cellPair => dataProvider.getRow('object_data', {ImageNumber: cellPair.ImageNumber, ObjectNumber: cellPair.ObjectNumber}))\r\n      const positiveObjectDataRows = positiveCellPairs.map(cellPair => dataProvider.getRow('object_data', {ImageNumber: cellPair.ImageNumber, ObjectNumber: cellPair.ObjectNumber}))\r\n      const trainingDataAddition = [...negativeObjectDataRows, ...positiveObjectDataRows]\r\n\r\n      const negativeLabels = new Array(negativeObjectDataRows.length).fill(0)\r\n      const positiveLabels = new Array(positiveObjectDataRows.length).fill(1)\r\n      const trainingLabelsAddition = negativeLabels.concat(positiveLabels)\r\n\r\n      const UpdatedTrainingObject = {\r\n        classifierType: \"LogisticRegression\",\r\n        trainingData: [...trainingDataAddition, ...trainingObject.trainingData],\r\n        trainingLabels: [...trainingLabelsAddition, ...trainingObject.trainingLabels],\r\n        featuresToUse: featuresToUse\r\n      }\r\n      console.log(UpdatedTrainingObject)\r\n      setTrainingObject(UpdatedTrainingObject)\r\n      // const newClassifierManager = new ClassifierManager(dataProvider, UpdatedTrainingObject)\r\n      \r\n      \r\n      // setClassifierManager(newClassifierManager)\r\n\r\n      const clearedTileState = { unclassified: tileState.unclassified, positive: [], negative: []}\r\n      setTileState(clearedTileState)\r\n      console.log(\"finished train\")\r\n      enableIterationButtons()\r\n    \r\n  }\r\n\r\n    const handleUpload = async (fileListObject) => {\r\n        setUploadButtonEnabled(false)\r\n        setFileListObject(fileListObject)\r\n        const uploadHandler = new UploadHandler(fileListObject)\r\n        const uploadReturnObject = await uploadHandler.getDataHandlerandStartingTrainingSet();\r\n\r\n        const dataProvider = uploadReturnObject.data_provider\r\n        setDataProvider(dataProvider)\r\n        const trainingTable = uploadReturnObject.training_data.training_table\r\n        const trainingDataTable = trainingTable.getDataColumnsPaired()\r\n\r\n        const trainingLabels = trainingTable.getTrainingLabels()\r\n        const initialTrainingData = trainingDataTable.map(row_object => {\r\n            const ObjectNumber = row_object['objectnum']\r\n            const ImageNumber = row_object['imagenum']\r\n            return dataProvider.getRow('object_data', {ObjectNumber, ImageNumber})\r\n        })\r\n        const totalFeatures = uploadReturnObject.training_data.features\r\n        const tempFeaturesToUse = totalFeatures.filter((elem)=>!elem.includes(\"Location\") && (elem !== \"ObjectNumber\") && (elem !== \"ImageNumber\"))\r\n        setFeaturesToUseState(tempFeaturesToUse)\r\n        console.log(\"finished data initialization\")\r\n        const initialTrainingObject = {\r\n            classifierType: \"LogisticRegression\",\r\n            trainingData: initialTrainingData,\r\n            trainingLabels: trainingLabels,\r\n            featuresToUse: tempFeaturesToUse\r\n        }\r\n        setTrainingObject(initialTrainingObject)\r\n        // console.log(\"starting initial training\")\r\n        // const newClassifierManager = new ClassifierManager(dataProvider, initialTrainingObject)\r\n        \r\n        // setClassifierManager(newClassifierManager)\r\n\r\n        setFetchButtonEnabled(true)\r\n        setTrainButtonEnabled(true)\r\n        setDownloadButtonEnabled(true)\r\n        setEvaluateButtonEnabled(true)\r\n        \r\n        \r\n        console.log(\"finished upload\")\r\n\r\n    setTrainingObject(initialTrainingObject)\r\n    // console.log(\"starting initial training\")\r\n    // const newClassifierManager = new ClassifierManager(dataProvider, initialTrainingObject)\r\n    \r\n    // setClassifierManager(newClassifierManager)\r\n\r\n    setFetchButtonEnabled(true)\r\n    setTrainButtonEnabled(true)\r\n    setDownloadButtonEnabled(true)\r\n    setscoreAllButtonEnabled(true)\r\n    setEvaluateButtonEnabled(true)\r\n    setUploadButtonEnabled(false)\r\n      \r\n    console.log(\"finished upload\")\r\n    setUploading(false)\r\n    setSuccess(true)\r\n\r\n  }\r\n    const handleDownload = async () => {\r\n      disableIterationButtons()\r\n      const classifierManager = new ClassifierManager(dataProvider, trainingObject)\r\n      await classifierManager.initTrainPromise()\r\n      classifierManager.userDownloadClassifierSpecPromise()\r\n      enableIterationButtons()\r\n    }\r\n\r\n    \r\n    function constructTileState(dataURLs) {\r\n        return {\r\n            unclassified: dataURLs.map((dataURL, idx, info) => {return {id: idx, address: dataURL, info: \"cell info, biology stuff\"}}),  \r\n            positive: [],\r\n            negative: []\r\n        };\r\n    }\r\n\r\n    function onChange(sourceId, sourceIndex, targetIndex, targetId) {\r\n        if (targetId) {\r\n          const result = move(\r\n            tileState[sourceId],\r\n            tileState[targetId],\r\n            sourceIndex,\r\n            targetIndex\r\n          );\r\n          return setTileState({\r\n            ...tileState,\r\n            [sourceId]: result[0],\r\n            [targetId]: result[1]\r\n          });\r\n        }\r\n    \r\n        const result = swap(tileState[sourceId], sourceIndex, targetIndex);\r\n        return setTileState({\r\n          ...tileState,\r\n          [sourceId]: result\r\n        });\r\n      }\r\n    \r\n      const handleClickOpenFetchDropdown = () => {\r\n        setOpenFetchDropdown(true);\r\n      };\r\n   \r\n      const handleCloseFetchDropdown = () => {\r\n        setOpenFetchDropdown(false);\r\n      };\r\n\r\n    return (\r\n       \r\n\r\n        <GridContextProvider onChange={onChange}>\r\n             \r\n        <div style={{ overflowX:\"hidden\", hieght: \"100%\", width: \"100%\" }}>\r\n      \r\n        <Row>\r\n        <Image src={logo} style={{marginLeft:\"10%\", height:\"30%\", width:\"25%\",position:\"relative\", maxHeight:\"125px\", marginBottom:\"1%\"}}></Image>\r\n       \r\n        <Col style = {{left:'40%'}}>\r\n        <div className={classes.root}>\r\n      <div className={classes.wrapper}>\r\n       <Tooltip title=\"Load Data\" aria-label=\"load data\">\r\n        <Fab\r\n          aria-label=\"save\"\r\n          color=\"primary\"\r\n          component=\"label\"\r\n          className={buttonClassname}\r\n          style =  {{height: '5vw', width: '5vw'}}\r\n        >\r\n        \r\n          {success ? <CheckIcon style =  {{ hieght: \"50%\", width: \"50%\"}}/> : <CloudUploadIcon style =  {{ hieght: \"50%\", width: \"50%\"}}/>}\r\n          <input  type=\"file\"\r\n                hidden webkitdirectory=\"true\"\r\n                mozdirectory=\"true\"\r\n                msdirectory=\"true\"\r\n                odirectory=\"true\"\r\n                directory=\"true\"\r\n                multiple\r\n                onChange = {(eventObject)=>{handleUpload(eventObject)}}  \r\n                disabled={!uploadButtonEnabled} \r\n               \r\n        />\r\n        </Fab>\r\n        </Tooltip>\r\n        {/* size={68}  */}\r\n        {uploading && <CircularProgress className={classes.fabProgress} style={{height: '6vw', width: '6vw', marginTop:\"4%\", marginRight:\"4%\"}}/>}\r\n      </div>  \r\n    </div>\r\n        </Col>\r\n        <Col style = {{left: '15%', marginTop: '.75%'}}>\r\n        <Tooltip title=\"Download\" aria-label=\"download\">\r\n        <Fab \r\n         aria-label=\"save\"\r\n         color=\"primary\"\r\n         component=\"label\"\r\n        disabled={!downloadButtonEnabled} \r\n        onClick={handleDownload}\r\n        style =  {{height: '5vw', width: '5vw'}}\r\n        > <SaveAltIcon style =  {{ hieght: \"50%\", width: \"50%\"}} /></Fab> \r\n        </Tooltip>\r\n        </Col>\r\n       \r\n        </Row>\r\n        <Row>\r\n        \r\n        <Grid container justify=\"center\" spacing={2} style={{marginBottom: 15}}>\r\n       \r\n        <Grid key={0} item>\r\n            <Button disabled={!fetchButtonEnabled} variant=\"contained\" aria-controls=\"simple-menu\" aria-haspopup=\"true\" onClick={handleClickFetchDropDown}>\r\n            Fetch\r\n            </Button>\r\n            <Menu\r\n            id=\"simple-menu\"\r\n            anchorEl={anchorEl}\r\n            keepMounted\r\n            open={Boolean(anchorEl)}\r\n            onClose={handleCloseFetchDropDown}\r\n            >\r\n            <MenuItem onClick={()=>handleCloseFetchDropDown(\"random\")}>Random</MenuItem>\r\n            <MenuItem onClick={()=>handleCloseFetchDropDown(\"positive\")}>Positive</MenuItem>\r\n            <MenuItem onClick={()=>handleCloseFetchDropDown(\"negative\")}>Negative</MenuItem>\r\n            <MenuItem onClick={handleClickOpenFetchDropdown}>By Image</MenuItem>\r\n           \r\n                <Dialog\r\n            open={openFetchDropdown}\r\n            onClose={handleCloseFetchDropdown}\r\n        \r\n            >\r\n            <DialogTitle>Fetch By Image</DialogTitle>\r\n            <DialogContent>\r\n            <DialogContentText>\r\n                Select the image number you would like to fetch from. \r\n            </DialogContentText>\r\n            <form  noValidate >\r\n                <FormControl >\r\n                <InputLabel >Image</InputLabel>\r\n                <Select\r\n                    autoFocus>\r\n                    <MenuItem value=\"1\">1</MenuItem>\r\n                    <MenuItem value=\"2\">2</MenuItem>\r\n                    <MenuItem value=\"3\">3</MenuItem>\r\n                    <MenuItem value=\"4\" >4</MenuItem>\r\n                    <MenuItem value=\"5\" >5</MenuItem>\r\n                </Select>\r\n                </FormControl>\r\n            </form>\r\n            </DialogContent>\r\n            <DialogActions>\r\n            <Button onClick={handleCloseFetchDropdown} color=\"primary\">\r\n                Close\r\n            </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n            \r\n            </Menu>\r\n    </Grid>\r\n\r\n\r\n        <Grid key={1} item>\r\n            {/* style = {{height: \"5vw\", width:\"10vw\", minHeight:2, maxHeight: 35, maxwidth: 50, fontSize: \"max(1.5vw, 20)\"}}  */}\r\n        <Button disabled={!trainButtonEnabled} variant=\"contained\" onClick={handleTrain}>Train</Button>\r\n        </Grid>\r\n\r\n        <Grid key={2} item>\r\n         {/* <Button disabled={!evaluateButtonEnabled} variant=\"contained\" onClick={()=>{}}>Evaluate</Button>  */}\r\n          {/* TODO: need to fix button disabled DONE*/}\r\n          {!evaluateButtonEnabled ? <Button disabled={!evaluateButtonEnabled} variant=\"contained\" onClick={()=>{}}>Evaluate</Button> : <Evaluate></Evaluate>}\r\n        </Grid>\r\n\r\n        <Grid key={3} item>\r\n        {/* <Button  disabled={!scoreAllButtonEnabled} variant=\"contained\" onClick={()=>{}}>Score All</Button> */}\r\n          {/* TODO: need to fix button disabled DONE*/}\r\n          \r\n          {!evaluateButtonEnabled ? <Button disabled={!evaluateButtonEnabled} variant=\"contained\" onClick={()=>{}}>Score All</Button> : <ScoreAll></ScoreAll>}\r\n        </Grid>\r\n        \r\n    </Grid>\r\n    </Row>\r\n\r\n  \r\n        <div>\r\n        \r\n        \r\n        <label style = {{textAlign:\"left\", backgroundColor: 'white', paddingLeft: \"10%\", marginBottom:\"0.5%\", userSelect: \"none\"} }>Unclassified </label>\r\n      \r\n        <div>\r\n        <GridDropZone\r\n             className=\"dropzone \"\r\n            id=\"unclassified\"\r\n            boxesPerRow={8}\r\n            rowHeight={80}\r\n            style={{height: \"20vw\", maxHeight: 200, minHeight:150, marginBottom:10, marginLeft: \"10%\", width:\"80%\"}}\r\n          >   \r\n            {!fetching ? tileState.unclassified.map(item => (\r\n              <GridItem className= \"hoverTest\"  style={{height:\"10vw\", width: \"10vw\", minHeight:80, minWidth: 80, maxHeight: 105, maxWidth: 105, padding:10}} key={item.id}>\r\n                <div className=\"grid-item\" >\r\n                    <div className=\"grid-item-content\" style = {{backgroundImage:  `url(${item.address})`}} >\r\n                    <span className= \"hoverText\">{item.info}</span>\r\n                        </div> \r\n\r\n                </div>\r\n              </GridItem>\r\n            )) : <CircularProgress style= {{hieght:\"7%\", width:\"7%\", marginTop: \"8%\", marginLeft: \"45%\"}}/> } \r\n        \r\n          </GridDropZone>\r\n          </div>\r\n         \r\n        \r\n        <Row>\r\n       \r\n          <label style = {{textAlign:\"left\", backgroundColor: 'white', paddingLeft: \"11%\", userSelect: \"none\", marginBottom:\"0.5%\", marginTop:0} }>Positive</label> \r\n    \r\n        \r\n          <label style = {{textAlign:\"left\", backgroundColor: 'white', paddingRight: \"8%\", userSelect: \"none\", margin: \"auto\",  marginBottom:\"0.5%\", marginTop:0} }>Negative</label>\r\n       \r\n          </Row>\r\n         \r\n         <Row>\r\n\r\n          <GridDropZone\r\n            className=\"dropzone positive\"\r\n            id=\"positive\"\r\n            boxesPerRow={4}\r\n            rowHeight={80}\r\n            style={{height: \"20vw\", maxHeight: 200, minHeight:150}}\r\n          >\r\n            \r\n            {tileState.positive.map(item => (\r\n              <GridItem className= \"hoverTest\" style={{height:\"10vw\", width: \"10vw\", minHeight: 80, minWidth: 80, maxHeight: 105, maxWidth: 105, padding:10}} key={item.id}>\r\n                <div className=\"grid-item\"> \r\n                    <div className=\"grid-item-content\" style = {{backgroundImage: `url(${item.address})`}}>\r\n                    <span className= \"hoverText\">{item.info}</span>\r\n                        </div>  \r\n                </div>\r\n              </GridItem>\r\n            ))}\r\n          </GridDropZone>\r\n   \r\n      \r\n          <GridDropZone\r\n            className=\"dropzone negative\"\r\n            id=\"negative\"\r\n            boxesPerRow={4}\r\n            rowHeight= {80}\r\n            style={{height: \"20vw\", maxHeight: 200, minHeight:150}}\r\n          >\r\n            {tileState.negative.map(item => (\r\n              <GridItem className= \"hoverTest\" style={{height:\"10vw\", width: \"10vw\", minHeight: 80, minWidth: 80, maxHeight: 105, maxWidth: 105, padding: 10}} key={item.address}>\r\n                <div className=\"grid-item\">\r\n                <div className=\"grid-item-content\" style = {{backgroundImage: `url(${item.address})`}}>\r\n                <span className= \"hoverText\">{item.info}</span>\r\n                        </div>      \r\n                </div>\r\n              </GridItem>\r\n            ))}\r\n          </GridDropZone>\r\n\r\n     \r\n      \r\n        </Row>\r\n        </div>\r\n      \r\n \r\n    </div>\r\n    </GridContextProvider>\r\n\r\n    );\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport default TestUIMVP; "],"sourceRoot":""}