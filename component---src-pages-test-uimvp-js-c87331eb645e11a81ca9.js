(self.webpackChunkgatsby_test=self.webpackChunkgatsby_test||[]).push([[612],{68127:function(e,t,n){"use strict";n.r(t);var a=n(85061),i=n(92137),r=n(87757),l=n.n(r),o=n(67294),s=n(96667),c=n(47798),u=n(83332),m=n(80838),d=n(44005),g=n(90058),f=n(43638),p=n(80633),h=n(79312),v=n(85505),E=n(10920),b=n(27136),w=n(51474),Z=n(49995),y=n(13508),k=n(54657),x=n(98910),C=n(22019),N=n(49224),S=n(39331),T=n(4513),P=n(89952),H=n(65733),I=n(32253),L=n(9901),j=n(31690),B=n(11592),R=n(76047),O=n(77447),_=n(60577),A=n(29181),D=n(55610),z=n(88816),W=n(59477),U=n(59274),$=n(31261),F=n(8441),M=n(96531),V=n(48498),X=(n(34058),n(74298),o.forwardRef((function(e,t){return o.createElement(_.Z,Object.assign({direction:"up",ref:t},e))}))),q=(0,E.Z)((function(e){return{root:{display:"flex",alignItems:"center"},wrapper:{margin:e.spacing(1),position:"relative"},buttonSuccess:{backgroundColor:w.Z[500],"&:hover":{backgroundColor:w.Z[700]}},fabProgress:{color:w.Z[500],position:"absolute",top:-6,left:-6,zIndex:1},buttonProgress:{color:w.Z[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}}));t.default=function(){var e,t,n=o.useState(null),r=n[0],E=n[1],w=o.useState(null),_=w[0],G=w[1],J=o.useState(null),K=J[0],Q=J[1],Y=o.useState(null),ee=Y[0],te=Y[1],ne=o.useState(it([])),ae=ne[0],ie=ne[1],re=o.useState(null),le=re[0],oe=re[1],se=o.useState(null),ce=(se[0],se[1]),ue=o.useState(null),me=ue[0],de=ue[1],ge=o.useState(!1),fe=ge[0],pe=ge[1],he=o.useState(!1),ve=he[0],Ee=he[1],be=o.useState(!1),we=be[0],Ze=be[1],ye=o.useState(!1),ke=ye[0],xe=ye[1],Ce=o.useState(!0),Ne=Ce[0],Se=Ce[1],Te=o.useState(!1),Pe=(Te[0],Te[1]),He=o.useState(!1),Ie=He[0],Le=He[1],je=o.useState(!1),Be=je[0],Re=je[1],Oe=o.useState(!1),_e=Oe[0],Ae=Oe[1],De=o.useState(!1),ze=De[0],We=De[1],Ue=o.useState(!1),$e=(Ue[0],Ue[1]),Fe=o.useState(!1),Me=Fe[0],Ve=Fe[1],Xe=function(){$e(!0)},qe=function(){Ve(!1)},Ge=q(),Je=(0,v.Z)(((e={})[Ge.buttonSuccess]=Be,e)),Ke=function(e){E(null),void 0!==e&&et(e)},Qe=function(){pe(!1),Ee(!1),xe(!1),Ze(!1),Pe(!1)},Ye=function(){pe(!0),Ee(!0),xe(!0),Ze(!0),Pe(!0)},et=function(){var e=(0,i.Z)(l().mark((function e(t){var n,a,i,r,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ae(!0),Qe(),ie({unclassified:[],positive:[],negative:[]}),n=new C.$(_,K),e.next=7,n.initTrainPromise();case 7:return ce(t),a=n.fetchUpToNCellPairsByClass(t,20),i=new N.z(ee,_),e.next=12,i.getObjsToURLs(a);case 12:return r=e.sent,o=it(r),ie(o),oe(new S.e(a,r)),Ye(),oe(a,r),Ye(),Ae(!1),e.abrupt("return");case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),tt=function(){var e=(0,i.Z)(l().mark((function e(){var t,n,i,r,o,s,c,u,m,d,g,f;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Qe(),t=ae.negative.map((function(e){return e.id})),n=ae.positive.map((function(e){return e.id})),console.log(t,ae),le.setClassByIndexArray("negative",t),le.setClassByIndexArray("positive",n),i=le.getPairsByClass("negative"),r=le.getPairsByClass("positive"),o=i.map((function(e){return _.getRow("object_data",{ImageNumber:e.ImageNumber,ObjectNumber:e.ObjectNumber})})),s=r.map((function(e){return _.getRow("object_data",{ImageNumber:e.ImageNumber,ObjectNumber:e.ObjectNumber})})),c=[].concat((0,a.Z)(o),(0,a.Z)(s)),u=new Array(o.length).fill(0),m=new Array(s.length).fill(1),d=u.concat(m),g={classifierType:"LogisticRegression",trainingData:[].concat((0,a.Z)(c),(0,a.Z)(K.trainingData)),trainingLabels:[].concat((0,a.Z)(d),(0,a.Z)(K.trainingLabels)),featuresToUse:me},console.log(g),Q(g),f={unclassified:ae.unclassified,positive:[],negative:[]},ie(f),console.log("finished train"),Ye();case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),nt=function(){var e=(0,i.Z)(l().mark((function e(t){var n,a,i,r,o,s,c,u,m,d;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Le(!0),Se(!1),te(t),n=new x.Z(t),e.next=6,n.getDataHandlerandStartingTrainingSet();case 6:a=e.sent,i=a.data_provider,G(i),r=a.training_data.training_table,o=r.getDataColumnsPaired(),s=r.getTrainingLabels(),c=o.map((function(e){var t=e.objectnum,n=e.imagenum;return i.getRow("object_data",{ObjectNumber:t,ImageNumber:n})})),u=a.training_data.features,m=u.filter((function(e){return!e.includes("Location")&&"ObjectNumber"!==e&&"ImageNumber"!==e})),de(m),console.log("finished data initialization"),Q(d={classifierType:"LogisticRegression",trainingData:c,trainingLabels:s,featuresToUse:m}),pe(!0),Ee(!0),xe(!0),Ze(!0),console.log("finished upload"),Q(d),pe(!0),Ee(!0),xe(!0),Pe(!0),Ze(!0),Se(!1),console.log("finished upload"),Le(!1),Re(!0);case 34:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),at=function(){var e=(0,i.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Qe(),t=new C.$(_,K),e.next=4,t.initTrainPromise();case 4:t.userDownloadClassifierSpecPromise(),Ye();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function it(e,t){return{unclassified:e.map((function(e,t){return{id:t,address:e,info:"cellToolTips[idx]"}})),positive:[],negative:[]}}var rt=function(){We(!1)};return o.createElement(F.d,{onChange:function(e,t,n,a){var i;if(a){var r,l=(0,U.p)(ae[e],ae[a],t,n);return ie(Object.assign({},ae,((r={})[e]=l[0],r[a]=l[1],r)))}var o=(0,$.L)(ae[e],t,n);return ie(Object.assign({},ae,((i={})[e]=o,i)))}},o.createElement("div",{style:{overflowX:"hidden",hieght:"100%",width:"100%"}},o.createElement(s.Z,null,o.createElement(p.Z,{src:f.Z,style:{marginLeft:"10%",height:"30%",width:"25%",position:"relative",maxHeight:"125px",marginBottom:"1%"}}),o.createElement(c.Z,{style:{left:"40%"}},o.createElement("div",{className:Ge.root},o.createElement("div",{className:Ge.wrapper},o.createElement(O.ZP,{title:"Load Data","aria-label":"load data"},o.createElement(Z.Z,{"aria-label":"save",color:"primary",component:"label",className:Je,style:{height:"5vw",width:"5vw"}},Be?o.createElement(y.Z,{style:{hieght:"50%",width:"50%"}}):o.createElement(k.Z,{style:{hieght:"50%",width:"50%"}}),o.createElement("input",{type:"file",hidden:!0,webkitdirectory:"true",mozdirectory:"true",msdirectory:"true",odirectory:"true",directory:"true",multiple:!0,onChange:function(e){nt(e)},disabled:!Ne}))),Ie&&o.createElement(b.Z,{className:Ge.fabProgress,style:{height:"6vw",width:"6vw",marginTop:"4%",marginRight:"4%"}})))),o.createElement(c.Z,{style:{left:"15%",marginTop:".75%"}},o.createElement(O.ZP,{title:"Download","aria-label":"download"},o.createElement(Z.Z,{"aria-label":"save",color:"primary",component:"label",disabled:!ke,onClick:at,style:{height:"5vw",width:"5vw"}}," ",o.createElement(h.Z,{style:{hieght:"50%",width:"50%"}}))))),o.createElement(s.Z,null,o.createElement(m.Z,{container:!0,justify:"center",spacing:2,style:{marginBottom:15}},o.createElement(m.Z,{key:0,item:!0},o.createElement(u.Z,{disabled:!fe,variant:"contained","aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){E(e.currentTarget)}},"Fetch"),o.createElement(d.Z,{id:"simple-menu",anchorEl:r,keepMounted:!0,open:Boolean(r),onClose:function(){E(null)}},o.createElement(g.Z,{onClick:function(){return Ke("random")}},"Random"),o.createElement(g.Z,{onClick:function(){return Ke("positive")}},"Positive"),o.createElement(g.Z,{onClick:function(){return Ke("negative")}},"Negative"),o.createElement(g.Z,{onClick:function(){We(!0)}},"By Image"),o.createElement(T.Z,{open:ze,onClose:rt},o.createElement(L.Z,null,"Fetch By Image"),o.createElement(H.Z,null,o.createElement(I.Z,null,"Select the image number you would like to fetch from."),o.createElement("form",{noValidate:!0},o.createElement(j.Z,null,o.createElement(B.Z,null,"Image"),o.createElement(R.Z,{autoFocus:!0},o.createElement(g.Z,{value:"1"},"1"),o.createElement(g.Z,{value:"2"},"2"),o.createElement(g.Z,{value:"3"},"3"),o.createElement(g.Z,{value:"4"},"4"),o.createElement(g.Z,{value:"5"},"5"))))),o.createElement(P.Z,null,o.createElement(u.Z,{onClick:rt,color:"primary"},"Close"))))),o.createElement(m.Z,{key:1,item:!0},o.createElement(u.Z,{disabled:!ve,variant:"contained",onClick:tt},"Train")),o.createElement(m.Z,{key:2,item:!0},we?o.createElement(z.default,null):o.createElement(u.Z,{disabled:!we,variant:"contained",onClick:function(){}},"Evaluate")),o.createElement(m.Z,{key:3,item:!0},we?o.createElement(W.default,null):o.createElement(u.Z,((t={disabled:!we,onClick:function(){Ve(!0)},variant:"contained"}).onClick=function(){},t),"Score All"),o.createElement(T.Z,{open:Me,TransitionComponent:X,keepMounted:!0,onClose:qe},o.createElement(A.Z,{onClick:qe,style:{position:"absolute",right:"10px",top:"10px"}}),o.createElement(D.default,null))))),o.createElement("div",null,o.createElement("label",{style:{textAlign:"left",backgroundColor:"white",paddingLeft:"10%",marginBottom:"0.5%",userSelect:"none"}},"Unclassified "),o.createElement("div",null,o.createElement(M.$,{className:"dropzone ",id:"unclassified",boxesPerRow:8,rowHeight:80,style:{height:"20vw",maxHeight:200,minHeight:150,marginBottom:10,marginLeft:"10%",width:"80%"}},_e?o.createElement(b.Z,{style:{height:"5vw",width:"5vw",marginTop:"5%",marginLeft:"45%"}}):ae.unclassified.map((function(e){return o.createElement(V.P,{className:"hoverTest",style:{height:"20vw",width:"10vw",minHeight:80,minWidth:80,maxHeight:105,maxWidth:105,padding:10},key:e.id},o.createElement(u.Z,{className:"grid-item",onClick:Xe},o.createElement("div",{className:"grid-item-content",style:{backgroundImage:"url("+e.address+")"}},o.createElement("span",{className:"hoverText"},e.info))))})))),o.createElement(s.Z,null,o.createElement("label",{style:{textAlign:"left",backgroundColor:"white",paddingLeft:"11%",userSelect:"none",marginBottom:"0.5%",marginTop:0}},"Positive"),o.createElement("label",{style:{textAlign:"left",backgroundColor:"white",paddingRight:"8%",userSelect:"none",margin:"auto",marginBottom:"0.5%",marginTop:0}},"Negative")),o.createElement(s.Z,null,o.createElement(M.$,{className:"dropzone positive",id:"positive",boxesPerRow:4,rowHeight:80,style:{height:"20vw",maxHeight:200,minHeight:150}},ae.positive.map((function(e){return o.createElement(V.P,{className:"hoverTest",style:{height:"50vw",width:"10vw",minHeight:80,minWidth:80,maxHeight:205,maxWidth:105,padding:10},key:e.id},o.createElement("div",{className:"grid-item"},o.createElement("div",{className:"grid-item-content",style:{backgroundImage:"url("+e.address+")"}},o.createElement("span",{className:"hoverText"},e.info))))}))),o.createElement(M.$,{className:"dropzone negative",id:"negative",boxesPerRow:4,rowHeight:80,style:{height:"20vw",maxHeight:200,minHeight:150}},ae.negative.map((function(e){return o.createElement(V.P,{className:"hoverTest",style:{height:"10vw",width:"10vw",minHeight:80,minWidth:80,maxHeight:105,maxWidth:105,padding:10},key:e.address},o.createElement("div",{className:"grid-item"},o.createElement("div",{className:"grid-item-content",style:{backgroundImage:"url("+e.address+")"}},o.createElement("span",{className:"hoverText"},e.info))))})))))))}}}]);
//# sourceMappingURL=component---src-pages-test-uimvp-js-c87331eb645e11a81ca9.js.map