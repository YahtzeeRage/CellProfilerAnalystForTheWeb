(self.webpackChunkgatsby_test=self.webpackChunkgatsby_test||[]).push([[162],{22019:function(t,e,i){"use strict";i.d(e,{$:function(){return o}});var n=i(85061),r=i(18446),a=i.n(r),s=i(37107),o=function(){function t(t,e){this.testConstructorInputPreconditions(t,e),this.DataProvider=t,this.InitialTrainingObject=e;var i=e.classifierType,n=e.featuresToUse,r=e.trainingData,a=e.trainingLabels;this.TrainingSetObject={classifierType:i,featuresToUse:n,trainingData:r,trainingLabels:a},this.Classifier=new s.q(this.TrainingSetObject)}var e=t.prototype;return e.testConstructorInputPreconditions=function(t,e){if(null==t||null==e)throw new Error("Constructor Error on no dataprovider or no initialtrainingobject");if(void 0===e.trainingData||void 0===e.trainingLabels||void 0===e.featuresToUse||void 0===e.classifierType)throw new Error("Constructor Error on InitialTrainingData missing fields");if("LogisticRegression"!==e.classifierType)throw new Error("Constructor Error classifierType passed in is not implemented")},e.initTrainPromise=function(){return this.Classifier.trainPromise()},e.fetchUpToNCellPairsByClass=function(t,e){var i=this;if("positive"!==t&&"negative"!==t&&"random"!==t)throw new Error("Error on invalid class: got "+t+" but expected negative or positive or random}");var n=this.DataProvider.getNRandomObjs(e);if("random"===t)return n;var r=n.map((function(t){return i.DataProvider.getRow("object_data",t)})),a=0;"positive"==t&&(a=1);var s=this.Classifier.predict(r);return n.filter((function(t,e){return s[e]===a}))},e.appendToTrainingSetAndRetrainPromise=function(t){if(this.TrainingSetObject.trainingData=[].concat((0,n.Z)(this.TrainingSetObject.trainingData),(0,n.Z)(t.trainingData)),this.TrainingSetObject.trainingLabels=[].concat((0,n.Z)(this.TrainingSetObject.trainingLabels),(0,n.Z)(t.trainingLabels)),this.TrainingSetObject.classifierType!==t.classifierType||!a()(this.TrainingSetObject.featuresToUse,t.featuresToUse))throw new Error("Error incompatible addition TrainingSetObject, needs same classifierType and featuresToUse:\nComparison: expected: "+this.TrainingSetObject.classifierType+" and "+this.TrainingSetObject.featuresToUse+"\ngot: "+t.classifierType+" and "+t.featuresToUse);return this.Classifier=new s.q(this.TrainingSetObject),this.Classifier.trainPromise()},e.getTrainingSetObject=function(){return this.TrainingSetObject},e.userDownloadClassifierSpecPromise=function(){return this.Classifier.DownloadModelPromise()},t}()},49224:function(t,e,i){"use strict";i.d(e,{z:function(){return c}});var n=i(92137),r=i(87757),a=i.n(r),s=i(6750),o=i(13967),c=function(){function t(t,e){this.getObjsToURLs=function(){var t=(0,n.Z)(a().mark((function t(e){var i,n,r,o,c,u,f,h;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=[],n=0;case 2:if(!(n<e.length)){t.next=19;break}return r=e[n].ImageNumber,o=[],c=r.toString(),t.next=8,this.getImagefromFile(r);case 8:return o=t.sent,this.images_seen[c]=o,u=this.data_provider.getCordsforCellDisplay(e[n]),f=new s.F(o,u),t.next=14,f.getDataURL();case 14:h=t.sent,i.push(h);case 16:n++,t.next=2;break;case 19:return t.abrupt("return",i);case 20:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),this.getImgUrl=function(){var t=(0,n.Z)(a().mark((function t(e){var i,n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=this.getImagesfromFile(e),n=new s.F(i),t.abrupt("return",n.getDataUrl());case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),this.getImagefromFile=function(){var t=(0,n.Z)(a().mark((function t(e){var i,n,r,s=this;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),i=this.data_provider.returnAllImgFileNames(e),t.next=4,Promise.all(i.map((function(t){var e=s.file_handler.findFile(t.filename);return s.file_handler.fileReaderPromiseImage(e).then((function(t){return s.makeImage(t)}))})));case 4:for(n=t.sent,[],r=0;r<n.length;r++)delete i.filename,i[r].image=n[r];return t.abrupt("return",i);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),this.file_handler=new o.Z(t),this.data_provider=e,this.images_seen={}}return t.prototype.makeImage=function(t){var e=new Image;return e.src=t,e},t}()},6750:function(t,e,i){"use strict";i.d(e,{F:function(){return n}});var n=function(){function t(t,e,i,n){void 0===e&&(e={}),void 0===i&&(i={}),void 0===n&&(n="object"),this.img_info=t,this.box_dim=i,this.image_type=n,this.cords=e,this.canvases={}}var e=t.prototype;return e.setDimensionsofImg=function(){"object"===this.image_type&&(this.box_dim.h=40,this.box_dim.l=40),"image"===this.image_type&&(this.box_dim.l=this.img_info[0].image.width,this.box_dim.h=this.img_info[0].image.height)},e.getDataURL=function(){this.setDimensionsofImg();var t=document.createElement("canvas");t.width=this.img_info[0].image.width,t.height=this.img_info[0].image.height;for(var e=t.getContext("2d"),i=0;i<this.img_info.length;i++){var n=this.img_info[i].color,r=document.createElement("canvas");this.canvases[n]=r}for(i=0;i<this.img_info.length;i++){n=this.img_info[i].color.toString();this.createColorCanvas(this.img_info[i].image,n)}e.globalCompositeOperation="lighter";for(i=0;i<this.img_info.length;i++){var a=this.img_info[i];e.drawImage(this.canvases[a.color],this.cords.x,this.cords.y,this.box_dim.h,this.box_dim.l,0,0,t.width,t.height)}return e.globalCompositeOperation="source-over",t.toDataURL()},e.createColorCanvas=function(t,e){var i=t.height,n=t.width;this.canvases[e].width=n,this.canvases[e].height=i;var r=this.canvases[e].getContext("2d");r.globalCompositeOperation="source-over",r.drawImage(t,0,0),r.globalCompositeOperation="multiply",r.fillStyle=e,r.fillRect(0,0,n,i),r.globalCompositeOperation="source-over"},t}()},39331:function(t,e,i){"use strict";i.d(e,{e:function(){return a}});var n=i(64721),r=i.n(n),a=function(){function t(t,e){if(this.classifications=[],!t||!e)throw new Error("Constructor Error on no data url or data pairs passed in");if(t.length!==e.length)throw new Error("Constructor Error on mismatched data pair and dataurl length");this.data_pairs=t,this.dataurls=e;for(var i=0;i<this.data_pairs.length;i++)this.classifications.push("unclassified")}t.getDataUrlFromImg=function(t){var e=document.createElement("canvas"),i=e.getContext("2d"),n=new Image;return n.onload=function(){i.drawImage(n,0,0)},n.src=t,n.crossOrigin="Anonymous",e.toDataURL()};var e=t.prototype;return e.getNumberImages=function(){return this.data_pairs.length},e.getDataUrlByIndex=function(t){return this.dataurls[t]},e.setImageClassByIndex=function(t,e){if(void 0===t||void 0===e)throw new Error("setImageClassByIndex Error must have 2 arguments: index and class");if(!r()(["unclassified","positive","negative"],e))throw new Error("setImageClassByIndex Error incorrect class to set: "+e+", must be: unclassified, positive, negative");this.classifications[t]=e},e.getAllIndexes=function(t,e){for(var i=[],n=-1;-1!=(n=t.indexOf(e,n+1));)i.push(n);return i},e.getPairsByClass=function(t){if(r()(["unclassified","positive","negative"],t)){for(var e=[],i=this.getAllIndexes(this.classifications,t),n=0;n<i.length;n++)e.push(this.data_pairs[i[n]]);return e}throw new Error("wrong class entered")},e.setClassByIndexArray=function(t,e){if(!r()(["unclassified","positive","negative"],t))throw new Error("wrong class entered");for(var i=0;i<e.length;i++)this.classifications[e[i]]=t},t}()},47415:function(t,e,i){var n=i(29932);t.exports=function(t,e){return n(e,(function(e){return t[e]}))}},64721:function(t,e,i){var n=i(42118),r=i(98612),a=i(47037),s=i(40554),o=i(52628),c=Math.max;t.exports=function(t,e,i,u){t=r(t)?t:o(t),i=i&&!u?s(i):0;var f=t.length;return i<0&&(i=c(f+i,0)),a(t)?i<=f&&t.indexOf(e,i)>-1:!!f&&n(t,e,i)>-1}},18446:function(t,e,i){var n=i(90939);t.exports=function(t,e){return n(t,e)}},47037:function(t,e,i){var n=i(44239),r=i(1469),a=i(37005);t.exports=function(t){return"string"==typeof t||!r(t)&&a(t)&&"[object String]"==n(t)}},52628:function(t,e,i){var n=i(47415),r=i(3674);t.exports=function(t){return null==t?[]:n(t,r(t))}}}]);
//# sourceMappingURL=98ddc43748ced246c1e48c6ff765aefc64fdb02f-17e1d6f507ad5795adfd.js.map